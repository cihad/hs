angular.module("templates",[]),"classList"in document.createElement("_")||!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],a=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},c=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,a=n.length;a>i;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=c[n]=[],d=function(){return new c(this)};if(s[n]=Error[n],u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",-1!==l(this,e)},u.add=function(){var e,t=arguments,n=0,i=t.length,a=!1;do e=t[n]+"",-1===l(this,e)&&(this.push(e),a=!0);while(++n<i);a&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,i=0,a=n.length,o=!1;do for(e=n[i]+"",t=l(this,e);-1!==t;)this.splice(t,1),o=!0,t=l(this,e);while(++i<a);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},u.toString=function(){return this.join(" ")},a.defineProperty){var p={get:d,enumerable:!0,configurable:!0};try{a.defineProperty(i,t,p)}catch(h){-2146823252===h.number&&(p.enumerable=!1,a.defineProperty(i,t,p))}}else a[n].__defineGetter__&&i.__defineGetter__(t,d)}}(self),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},a=n.prototype,o=i.prototype,r=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,u=e.URL||e.webkitURL||e,d=u.createObjectURL,p=u.revokeObjectURL,h=u,m=e.btoa,f=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;c--;)s.prototype[l[c]]=c+1;return u.createObjectURL||(h=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(b),n.origin=t&&t[1])),n}),h.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):m?t+";base64,"+m(e.data):t+","+encodeURIComponent(e.data)):d?d.call(u,e):void 0},h.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(u,e)},a.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var a="",o=new v(e),l=0,c=o.length;c>l;l++)a+=String.fromCharCode(o[l]);n.push(a)}else if("Blob"===t(e)||"File"===t(e)){if(!r)throw new s("NOT_READABLE_ERR");var u=new r;n.push(u.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&f?n.push(f(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},a.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},a.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var a=arguments.length;return 3>a&&(n=null),new i(this.data.slice(e,a>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,t){var i=t?t.type||"":"",a=new n;if(e)for(var o=0,r=e.length;r>o;o++)a.append(Uint8Array&&e[o]instanceof Uint8Array?e[o].buffer:e[o]);var s=a.getBlob(i);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var i=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=i(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):e.MediumEditor=t}(this,function(){"use strict";function e(e,t){return this.init(e,t)}var t;!function(e){function n(t,n,i){i||(i=e);try{for(var a=0;a<t.length;a++){var o=t[a];if(!(o in i)){if(!n)return;i[o]={}}i=i[o]}return i}catch(r){}}function i(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var a=0;a<i.length;a++){var o=i[a];if(o)for(n in o)o.hasOwnProperty(n)&&"undefined"!=typeof o[n]&&(e||t.hasOwnProperty(n)===!1)&&(t[n]=o[n])}return t}t={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46},parentElements:["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return i.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return i.apply(this,e)},derives:function(e,t){function n(){}var a=t.prototype;return n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=e,t.prototype=i(!1,t.prototype,a),t},findAdjacentTextNodeWithContent:function(e,t,n){var i,a=!1,o=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(i=o.nextNode();i;){if(i===t)a=!0;else if(a&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=o.nextNode()}return i},isDescendant:function(e,t,n){if(!e||!t)return!1;if(n&&e===t)return!0;for(var i=t.parentNode;null!==i;){if(i===e)return!0;i=i.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},now:Date.now,throttle:function(e,t){var n,i,a,o=50,r=null,s=0,l=function(){s=Date.now(),r=null,a=e.apply(n,i),r||(n=i=null)};return t||0===t||(t=o),function(){var o=Date.now(),c=t-(o-s);return n=this,i=arguments,0>=c||c>t?(r&&(clearTimeout(r),r=null),s=o,a=e.apply(n,i),r||(n=i=null)):r||(r=setTimeout(l,c)),a}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(e.getAttribute("data-medium-element"))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,t){var n,i,a,o,r,s,l;if(e.queryCommandSupported("insertHTML"))try{return e.execCommand("insertHTML",!1,t)}catch(c){}if(n=e.defaultView.getSelection(),n.getRangeAt&&n.rangeCount){if(i=n.getRangeAt(0),l=i.commonAncestorContainer,3===l.nodeType&&l.nodeValue===i.toString()||3!==l.nodeType&&l.innerHTML===i.toString()){for(;l.parentNode&&1===l.parentNode.childNodes.length&&!l.parentNode.getAttribute("data-medium-element");)l=l.parentNode;i.selectNode(l)}for(i.deleteContents(),a=e.createElement("div"),a.innerHTML=t,o=e.createDocumentFragment();a.firstChild;)r=a.firstChild,s=o.appendChild(r);i.insertNode(o),s&&(i=i.cloneRange(),i.setStartAfter(s),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,n=t&&3===t.nodeType?t.parentNode:t;return n},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===this.parentElements.indexOf(t);)e=e.parentNode,e&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},execFormatBlock:function(e,t){var n=this.getSelectionData(this.getSelectionStart(e));if("blockquote"===t&&n.el&&"blockquote"===n.el.parentNode.tagName.toLowerCase())return e.execCommand("outdent",!1,null);if(n.tagName===t&&(t="p"),this.isIE){if("blockquote"===t)return e.execCommand("indent",!1,t);t="<"+t+">"}return e.execCommand("formatBlock",!1,t)},setTargetBlank:function(e){var t;if("a"===e.tagName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),t=0;t<e.length;t+=1)e[t].target="_blank"},addClassToAnchors:function(e,t){var n,i,a=t.split(" ");if("a"===e.tagName.toLowerCase())for(i=0;i<a.length;i+=1)e.classList.add(a[i]);else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)for(i=0;i<a.length;i+=1)e[n].classList.add(a[i])},isListItem:function(e){if(!e)return!1;if("li"===e.tagName.toLowerCase())return!0;for(var t=e.parentNode,n=t.tagName.toLowerCase();-1===this.parentElements.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(t=t.parentNode,!t||!t.tagName)return!1;n=t.tagName.toLowerCase()}return!1},cleanListDOM:function(e){if("li"===e.tagName.toLowerCase()){var t=e.parentElement;"p"===t.parentElement.tagName.toLowerCase()&&this.unwrapElement(t.parentElement)}},unwrapElement:function(e){var t,n=e.parentNode,i=e.firstChild;do t=i.nextSibling,n.insertBefore(i,e),i=t;while(i);n.removeChild(e)},warn:function(){void 0!==e.console&&"function"==typeof e.console.warn&&e.console.warn.apply(console,arguments)},deprecated:function(e,n,i){var a=e+" is deprecated, please use "+n+" instead.";i&&(a+=" Will be removed in "+i),t.warn(a)},deprecatedMethod:function(e,n,i,a){t.deprecated(e,n,a),"function"==typeof this[n]&&this[n].apply(this,i)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.forEach(function(t){e.tagName.toLowerCase()===t&&e.parentNode.removeChild(e)},this)},getClosestTag:function(e,n){return t.traverseUp(e,function(e){return e.tagName.toLowerCase()===n.toLowerCase()})},unwrap:function(e,t){for(var n=t.createDocumentFragment(),i=0;i<e.childNodes.length;i++)n.appendChild(e.childNodes[i]);n.childNodes.length?e.parentNode.replaceChild(n,e):e.parentNode.removeChild(e)},setObject:function(e,t,i){var a=e.split("."),o=a.pop(),r=n(a,!0,i);return r&&o?r[o]=t:void 0},getObject:function(e,t,i){return n(e?e.split("."):[],t,i)}}}(window);var n;!function(){n={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>',key:"b"},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>',key:"i"},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>',key:"u"},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},header1:{name:"header1",action:function(e){return"append-"+e.firstHeader},aria:function(e){return e.firstHeader},tagNames:function(e){return[e.firstHeader]},contentDefault:"<b>H1</b>"},header2:{name:"header2",action:function(e){return"append-"+e.secondHeader},aria:function(e){return e.secondHeader},tagNames:function(e){return[e.secondHeader]},contentDefault:"<b>H2</b>"},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'}}}();var i;!function(){i={allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",anchorInputCheckboxLabel:"Open in new window",anchorPreviewHideDelay:500,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,checkLinkFormat:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableAnchorPreview:!1,disableEditing:!1,disablePlaceholders:!1,toolbarAlign:"center",elementsContainer:!1,imageDragging:!0,standardizeSelectionStart:!1,contentWindow:window,ownerDocument:document,firstHeader:"h3",placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,anchorTarget:!1,anchorButton:!1,anchorButtonClass:"btn",extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",spellcheck:!0,paste:{forcePlainText:!0,cleanPastedHTML:!1,cleanAttrs:["class","style","dir"],cleanTags:["meta"]}}}();var a;!function(){a=function(e){t.extend(this,e)},a.extend=function(e){var n,i=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(n,i);var a=function(){this.constructor=n};return a.prototype=i.prototype,n.prototype=new a,e&&t.extend(n.prototype,e),n},a.prototype={init:function(){},parent:!1,base:null,name:null,checkState:null,getButton:null,queryCommandState:null,isActive:null,isAlreadyApplied:null,setActive:null,setInactive:null,onHide:null}}();var o;!function(){o={findMatchingSelectionParent:function(e,n){var i,a,o=n.getSelection();return 0===o.rangeCount?!1:(i=o.getRangeAt(0),a=i.commonAncestorContainer,t.traverseUp(a,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(e){return e.getAttribute("data-medium-element")},e)},selectionInContentEditableFalse:function(e){return this.findMatchingSelectionParent(function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")},e)},getSelectionHtml:function(){var e,t,n,i="",a=this.options.contentWindow.getSelection();if(a.rangeCount){for(n=this.options.ownerDocument.createElement("div"),e=0,t=a.rangeCount;t>e;e+=1)n.appendChild(a.getRangeAt(e).cloneContents());i=n.innerHTML}return i},getCaretOffsets:function(e,t){var n,i;return t||(t=window.getSelection().getRangeAt(0)),n=t.cloneRange(),i=t.cloneRange(),n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){var t=null;return t=this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer},getSelectedElements:function(e){var t,n,i,a=e.getSelection();if(!a.rangeCount||!a.getRangeAt(0).commonAncestorContainer)return[];if(t=a.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(n=[],i=t.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"==typeof a.containsNode?a.containsNode(e,!0):!0})},selectNode:function(e,t){var n=t.createRange(),i=t.getSelection();n.selectNodeContents(e),i.removeAllRanges(),i.addRange(n)}}}();var r;!function(){r=function(e){this.base=e,this.options=this.base.options,this.events=[],this.customEvents={},this.listeners={}},r.prototype={attachDOMEvent:function(e,t,n,i){e.addEventListener(t,n,i),this.events.push([e,t,n,i])},detachDOMEvent:function(e,t,n,i){var a,o=this.indexOfListener(e,t,n,i);-1!==o&&(a=this.events.splice(o,1)[0],a[0].removeEventListener(a[1],a[2],a[3]))},indexOfListener:function(e,t,n,i){var a,o,r;for(a=0,o=this.events.length;o>a;a+=1)if(r=this.events[a],r[0]===e&&r[1]===t&&r[2]===n&&r[3]===i)return a;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},attachCustomEvent:function(e,t){this.setupListener(e),this.listeners[e]&&(this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t))},detachCustomEvent:function(e,t){var n=this.indexOfCustomListener(e,t);-1!==n&&this.customEvents[e].splice(n,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,n){this.customEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},setupListener:function(e){if(!this.listeners[e])switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0),this.listeners[e]=!0;break;case"blur":this.setupListener("externalInteraction"),this.listeners[e]=!0;break;case"focus":this.setupListener("externalInteraction"),this.listeners[e]=!0;break;case"editableClick":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"click",this.handleClick.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableBlur":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"blur",this.handleBlur.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeypress":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keypress",this.handleKeypress.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeyup":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keyup",this.handleKeyup.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeydown":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keydown",this.handleKeydown.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeydownEnter":this.setupListener("editableKeydown"),this.listeners[e]=!0;break;case"editableKeydownTab":this.setupListener("editableKeydown"),this.listeners[e]=!0;break;case"editableKeydownDelete":this.setupListener("editableKeydown"),this.listeners[e]=!0;break;case"editableMouseover":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"mouseover",this.handleMouseover.bind(this))},this),this.listeners[e]=!0;break;case"editableDrag":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"dragover",this.handleDragging.bind(this)),this.attachDOMEvent(e,"dragleave",this.handleDragging.bind(this))},this),this.listeners[e]=!0;break;case"editableDrop":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"drop",this.handleDrop.bind(this))},this),this.listeners[e]=!0;break;case"editablePaste":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"paste",this.handlePaste.bind(this))},this),this.listeners[e]=!0}},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(e,n){var i,a,o=this.base.toolbar?this.base.toolbar.getToolbarElement():null,r=this.base.getExtensionByName("anchor-preview"),s=r&&r.getPreviewElement?r.getPreviewElement():null;this.base.elements.some(function(e){return!i&&e.getAttribute("data-medium-focused")&&(i=e),!!i},this),i&&"click"===n.type&&this.lastMousedownTarget&&(t.isDescendant(i,this.lastMousedownTarget,!0)||t.isDescendant(o,this.lastMousedownTarget,!0)||t.isDescendant(s,this.lastMousedownTarget,!0))&&(a=i),a||this.base.elements.some(function(n){return!a&&t.isDescendant(n,e,!0)&&(a=n),!!a},this);var l=!t.isDescendant(i,e,!0)&&!t.isDescendant(o,e,!0)&&!t.isDescendant(s,e,!0);a!==i&&(i&&l&&(i.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",n,i)),a&&(a.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",n,a))),l&&this.triggerCustomEvent("externalInteraction",n)},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){this.triggerCustomEvent("editableKeypress",e,e.currentTarget)},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(e){switch(this.triggerCustomEvent("editableKeydown",e,e.currentTarget),e.which){case t.keyCode.ENTER:this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget);break;case t.keyCode.TAB:this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget);break;case t.keyCode.DELETE:case t.keyCode.BACKSPACE:this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget)}}}}();var s;!function(){s=function(e,t){this.options=e,this.name=e.name,this.init(t)},s.prototype={init:function(e){this.base=e,this.button=this.createButton(),this.base.on(this.button,"click",this.handleClick.bind(this)),this.options.key&&this.base.subscribe("editableKeydown",this.handleKeydown.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.options.action?this.options.action(this.base.options):this.options.action},getAria:function(){return"function"==typeof this.options.aria?this.options.aria(this.base.options):this.options.aria},getTagNames:function(){return"function"==typeof this.options.tagNames?this.options.tagNames(this.base.options):this.options.tagNames},createButton:function(){var e=this.base.options.ownerDocument.createElement("button"),t=this.options.contentDefault,n=this.getAria();return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),e.setAttribute("data-action",this.getAction()),n&&(e.setAttribute("title",n),e.setAttribute("aria-label",n)),this.base.options.buttonLabels&&("fontawesome"===this.base.options.buttonLabels&&this.options.contentFA?t=this.options.contentFA:"object"==typeof this.base.options.buttonLabels&&this.base.options.buttonLabels[this.name]&&(t=this.base.options.buttonLabels[this.options.name])),e.innerHTML=t,e},handleKeydown:function(e){var t,n;(e.ctrlKey||e.metaKey)&&(t=String.fromCharCode(e.which||e.keyCode).toLowerCase(),this.options.key===t&&(e.preventDefault(),e.stopPropagation(),n=this.getAction(),n&&this.base.execAction(n)))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.base.execAction(t)},isActive:function(){return this.button.classList.contains(this.base.options.activeButtonClass)},setInactive:function(){this.button.classList.remove(this.base.options.activeButtonClass),delete this.knownState},setActive:function(){this.button.classList.add(this.base.options.activeButtonClass),delete this.knownState},queryCommandState:function(){var e=null;return this.options.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,n,i=!1,a=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(a&&a.length>0&&e.tagName&&(i=-1!==a.indexOf(e.tagName.toLowerCase())),!i&&this.options.style&&(t=this.options.style.value.split("|"),n=this.base.options.contentWindow.getComputedStyle(e,null).getPropertyValue(this.options.style.prop),t.forEach(function(e){this.knownState||(i=-1!==n.indexOf(e),(i||"text-decoration"!==this.options.style.prop)&&(this.knownState=i))},this)),i)}}}();var l;!function(){function e(){return[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d)(((?!&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d).)*)(?:&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""]]}l=a.extend({forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],window:window,document:document,targetBlank:!1,disableReturn:!1,parent:!0,init:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.base.subscribe("editablePaste",this.handlePaste.bind(this))},handlePaste:function(e,n){var i,a,o,r,s="",l="text/html",c="text/plain";if(this.window.clipboardData&&void 0===e.clipboardData&&(e.clipboardData=this.window.clipboardData,l="Text",c="Text"),e.clipboardData&&e.clipboardData.getData&&!e.defaultPrevented){if(e.preventDefault(),o=e.clipboardData.getData(l),r=e.clipboardData.getData(c),o||(o=r),this.cleanPastedHTML&&o)return this.cleanPaste(o);if(this.disableReturn||n.getAttribute("data-disable-return"))s=t.htmlEntities(r);else if(i=r.split(/[\r\n]+/g),i.length>1)for(a=0;a<i.length;a+=1)""!==i[a]&&(s+="<p>"+t.htmlEntities(i[a])+"</p>");else s=t.htmlEntities(i[0]);t.insertHTMLCommand(this.document,s)}},cleanPaste:function(n){var i,a,r,s=o.getSelectionElement(this.window),l=/<p|<br|<div/.test(n),c=e().concat(this.cleanReplacements||[]);for(i=0;i<c.length;i+=1)n=n.replace(c[i][0],c[i][1]);if(l){a=n.split("<br><br>"),this.pasteHTML("<p>"+a.join("</p><p>")+"</p>");try{this.document.execCommand("insertText",!1,"\n")}catch(u){}for(a=s.querySelectorAll("a,p,div,br"),i=0;i<a.length;i+=1)switch(r=a[i],r.innerHTML=r.innerHTML.replace(/\n/gi," "),r.tagName.toLowerCase()){case"a":this.targetBlank&&t.setTargetBlank(r);break;case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r)}}else this.pasteHTML(n)},pasteHTML:function(e,n){n=t.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var i,a,o,r,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),r=s.querySelector("body"),r.innerHTML=e,this.cleanupSpans(r),i=r.querySelectorAll("*"),o=0;o<i.length;o+=1)a=i[o],t.cleanupAttrs(a,n.cleanAttrs),t.cleanupTags(a,n.cleanTags);t.insertHTMLCommand(this.document,r.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(e){var n,i,a,o=e.querySelectorAll(".replace-with"),r=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(n=0;n<o.length;n+=1)i=o[n],a=this.document.createElement(i.classList.contains("bold")?"b":"i"),a.innerHTML=i.classList.contains("bold")&&i.classList.contains("italic")?"<i>"+i.innerHTML+"</i>":i.innerHTML,i.parentNode.replaceChild(a,i);for(o=e.querySelectorAll("span"),n=0;n<o.length;n+=1){if(i=o[n],t.traverseUp(i,r))return!1;t.unwrap(i,this.document)}}})}();var c;!function(){function e(){this.parent=!0,this.options={name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>'},this.name="anchor",this.hasForm=!0}e.prototype={formSaveLabel:"&#10003;",formCloseLabel:"&times;",handleClick:function(e){e.preventDefault(),e.stopPropagation();var n=o.getSelectedParentElement(t.getSelectionRange(this.base.options.ownerDocument));return n.tagName&&"a"===n.tagName.toLowerCase()?this.base.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.base.options.anchorInputPlaceholder,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.base.options.anchorTarget&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.base.options.anchorInputCheckboxLabel,"</label>"),this.base.options.anchorButton&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>Button</label>"),e.join("")},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),t.value=e||"",t.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},getFormOpts:function(){var e=this.getForm().querySelector(".medium-editor-toolbar-anchor-target"),t=this.getForm().querySelector(".medium-editor-toolbar-anchor-button"),n={url:this.getInput().value};return this.base.options.checkLinkFormat&&(n.url=this.checkLinkFormat(n.url)),n.target=e&&e.checked?"_blank":"_self",t&&t.checked&&(n.buttonClass=this.base.options.anchorButtonClass),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.base.createLink(e),this.base.checkSelection()},checkLinkFormat:function(e){var t=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(t.test(e)?"":"http://")+e},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()
},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.base.on(e,"click",this.handleFormClick.bind(this)),this.base.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.base.on(t,"click",this.handleCloseClick.bind(this)),this.base.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.base.options.ownerDocument,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.base.id,t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},handleTextboxKeyup:function(e){return e.keyCode===t.keyCode.ENTER?(e.preventDefault(),void this.doFormSave()):void(e.keyCode===t.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}},c=t.derives(s,e)}();var u;!function(){u=function(){this.parent=!0,this.name="anchor-preview"},u.prototype={previewValueSelector:"a",init:function(e){this.base=e,this.anchorPreview=this.createPreview(),this.base.options.elementsContainer.appendChild(this.anchorPreview),this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.base.options.ownerDocument.createElement("div");return e.id="medium-editor-anchor-preview-"+this.base.id,e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.base.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},deactivate:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||e.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(){var e,t,n=40,i=this.activeAnchor.getBoundingClientRect(),a=(i.left+i.right)/2;e=this.anchorPreview.offsetWidth/2,t=this.base.options.diffLeft-e,this.anchorPreview.style.top=Math.round(n+i.bottom-this.base.options.diffTop+this.base.options.contentWindow.pageYOffset-this.anchorPreview.offsetHeight)+"px",this.anchorPreview.style.left=e>a?t+e+"px":this.base.options.contentWindow.innerWidth-a<e?this.base.options.contentWindow.innerWidth+t-e+"px":t+a+"px"},attachToEditables:function(){this.base.subscribe("editableMouseover",this.handleEditableMouseover.bind(this))},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){n&&(t.showForm(n.attributes.href.value),n=null)}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.base.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var n=t.getClosestTag(e.target,"a");if(n){if(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML))return!0;if(this.base.toolbar&&this.base.toolbar.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.base.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.base.options.anchorPreviewHideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.base.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.base.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.base.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.base.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}}}();var d;!function(){function e(){this.parent=!0,this.options={name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>'},this.name="fontsize",this.hasForm=!0}e.prototype={handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.base.options.ownerDocument.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),t.value=e||"",t.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.base.options.ownerDocument,t=e.createElement("div"),n=e.createElement("input"),i=e.createElement("a"),a=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.base.id,this.base.on(t,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",t.appendChild(n),this.base.on(n,"change",this.handleSliderChange.bind(this)),a.setAttribute("href","#"),a.className="medium-editor-toobar-save",a.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(a),this.base.on(a,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':"&times;",t.appendChild(i),this.base.on(i,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){o.getSelectedElements(this.base.options.ownerDocument).forEach(function(e){"FONT"===e.tagName&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.base.execAction("fontSize",{size:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}},d=t.derives(s,e)}();var p;!function(){p=function(e){this.base=e,this.options=e.options,this.initThrottledMethods()},p.prototype={createToolbar:function(){var e=this.base.options.ownerDocument.createElement("div");return e.id="medium-editor-toolbar-"+this.base.id,e.className="medium-editor-toolbar",e.className+=this.options.staticToolbar?" static-toolbar":" stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.base.commands.forEach(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var e,n,i,a,o=this.base.options.ownerDocument.createElement("ul");return o.id="medium-editor-toolbar-actions"+this.base.id,o.className="medium-editor-toolbar-actions clearfix",o.style.display="block",this.base.options.buttons.forEach(function(i){a=this.base.getExtensionByName(i),"function"==typeof a.getButton&&(n=a.getButton(this.base),e=this.base.options.ownerDocument.createElement("li"),t.isElement(n)?e.appendChild(n):e.innerHTML=n,o.appendChild(e))}.bind(this)),i=o.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.options.firstButtonClass),i[i.length-1].classList.add(this.options.lastButtonClass)),o},deactivate:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.base.subscribe("blur",this.handleBlur.bind(this)),this.base.subscribe("focus",this.handleFocus.bind(this)),this.base.subscribe("editableClick",this.handleEditableClick.bind(this)),this.base.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.base.on(this.options.ownerDocument.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.options.staticToolbar&&this.options.stickyToolbar&&this.base.on(this.options.contentWindow,"scroll",this.handleWindowScroll.bind(this),!0),this.base.on(this.options.contentWindow,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){return e&&e.target&&t.isDescendant(this.getToolbarElement(),e.target)?!1:void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),"function"==typeof this.options.onShowToolbar&&this.options.onShowToolbar())},hideToolbar:function(){this.isDisplayed()&&(this.base.commands.forEach(function(e){"function"==typeof e.onHide&&e.onHide()}),this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),"function"==typeof this.options.onHideToolbar&&this.options.onHideToolbar())},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.base.commands.forEach(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var e=o.getSelectionHtml.call(this).replace(/<[\S]+><\/[\S]+>/gim,""),t=e.match(/<(p|h[1-6]|blockquote)[^>]*>/g);return!!t&&t.length>1},modifySelection:function(){var e=this.options.contentWindow.getSelection(),n=e.getRangeAt(0);if(this.options.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=t.findAdjacentTextNodeWithContent(o.getSelectionElement(this.options.contentWindow),n.startContainer,this.options.ownerDocument);if(i){for(var a=0;0===i.nodeValue.substr(a,1).trim().length;)a+=1;var r=this.options.ownerDocument.createRange();r.setStart(i,a),r.setEnd(n.endContainer,n.endOffset),e.removeAllRanges(),e.addRange(r),n=r}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.getFocusedElement()||o.selectionInContentEditableFalse(this.options.contentWindow))return void this.hideToolbar();var e=o.getSelectionElement(this.options.contentWindow);if(!e||-1===this.base.elements.indexOf(e)||e.getAttribute("data-disable-toolbar"))return void this.hideToolbar();if(this.options.updateOnEmptySelection&&this.options.staticToolbar)return void this.showAndUpdateToolbar();""===this.options.contentWindow.getSelection().toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():this.showAndUpdateToolbar()}},getFocusedElement:function(){for(var e=0;e<this.base.elements.length;e+=1)if(this.base.elements[e].getAttribute("data-medium-focused"))return this.base.elements[e];return null},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.base.commands.forEach(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}.bind(this)),this.checkActiveButtons()},checkActiveButtons:function(){var e,n=[],i=null,a=t.getSelectionRange(this.options.ownerDocument),r=function(t){"function"==typeof t.checkState?t.checkState(e):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&"function"==typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(a)for(e=o.getSelectedParentElement(a),this.base.commands.forEach(function(e){return"function"==typeof e.queryCommandState&&(i=e.queryCommandState(),null!==i)?void(i&&"function"==typeof e.setActive&&e.setActive()):void n.push(e)});void 0!==e.tagName&&-1===t.parentElements.indexOf(e.tagName.toLowerCase)&&(n.forEach(r),-1===this.base.elements.indexOf(e));)e=e.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e,t=this.getFocusedElement(),n=this.options.contentWindow.getSelection();return t?(this.options.staticToolbar?(this.showToolbar(),this.positionStaticToolbar(t)):n.isCollapsed||(this.showToolbar(),this.positionToolbar(n)),e=this.base.getExtensionByName("anchor-preview"),void(e&&"function"==typeof e.hidePreview&&e.hidePreview())):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.options.ownerDocument.documentElement&&this.options.ownerDocument.documentElement.scrollTop||this.options.ownerDocument.body.scrollTop,i=this.options.contentWindow.innerWidth,a=this.getToolbarElement(),o=e.getBoundingClientRect(),r=o.top+n,s=o.left+o.width/2,l=a.offsetHeight,c=a.offsetWidth,u=c/2;this.options.stickyToolbar?n>r+e.offsetHeight-l?(a.style.top=r+e.offsetHeight-l+"px",a.classList.remove("sticky-toolbar")):n>r-l?(a.classList.add("sticky-toolbar"),a.style.top="0px"):(a.classList.remove("sticky-toolbar"),a.style.top=r-l+"px"):a.style.top=r-l+"px","left"===this.options.toolbarAlign?t=o.left:"center"===this.options.toolbarAlign?t=s-u:"right"===this.options.toolbarAlign&&(t=o.right-c),0>t?t=0:t+c>i&&(t=i-Math.ceil(c)-1),a.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0";var t=this.options.contentWindow.innerWidth,n=e.getRangeAt(0),i=n.getBoundingClientRect(),a=(i.left+i.right)/2,o=this.getToolbarElement(),r=o.offsetHeight,s=o.offsetWidth,l=s/2,c=50,u=this.options.diffLeft-l;i.top<c?(o.classList.add("medium-toolbar-arrow-over"),o.classList.remove("medium-toolbar-arrow-under"),o.style.top=c+i.bottom-this.options.diffTop+this.options.contentWindow.pageYOffset-r+"px"):(o.classList.add("medium-toolbar-arrow-under"),o.classList.remove("medium-toolbar-arrow-over"),o.style.top=i.top+this.options.diffTop+this.options.contentWindow.pageYOffset-r+"px"),o.style.left=l>a?u+l+"px":l>t-a?t+u-l+"px":u+a+"px"}}}();var h;!function(){h=function(e){this.base=e,this.initPlaceholders(),this.attachEventHandlers()},h.prototype={initPlaceholders:function(){this.base.elements.forEach(function(e){this.updatePlaceholder(e)},this)},showPlaceholder:function(e){e&&e.classList.add("medium-editor-placeholder")},hidePlaceholder:function(e){e&&e.classList.remove("medium-editor-placeholder")},updatePlaceholder:function(e){e.querySelector("img")||e.querySelector("blockquote")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(e):this.showPlaceholder(e)},attachEventHandlers:function(){this.base.subscribe("blur",this.handleExternalInteraction.bind(this)),this.base.subscribe("editableBlur",this.handleBlur.bind(this)),this.base.subscribe("editableClick",this.handleHidePlaceholderEvent.bind(this)),this.base.subscribe("editableKeypress",this.handleHidePlaceholderEvent.bind(this)),this.base.subscribe("editablePaste",this.handleHidePlaceholderEvent.bind(this))},handleHidePlaceholderEvent:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)},handleExternalInteraction:function(){this.initPlaceholders()}}}();var m;return function(){m={paste:l}}(),function(){function l(e,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||this.getAttribute("data-disable-double-return")){var i=t.getSelectionStart(this.options.ownerDocument);i&&""===i.textContent.trim()&&e.preventDefault()}}function f(e){var n=t.getSelectionStart(this.options.ownerDocument),i=n&&n.tagName.toLowerCase();"pre"===i&&(e.preventDefault(),t.insertHTMLCommand(this.options.ownerDocument,"    ")),t.isListItem(n)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function g(e){var n,i,a,r=t.getSelectionStart(this.options.ownerDocument),s=r.tagName.toLowerCase(),l=/^(\s+|<br\/?>)?$/i,c=/h\d/i;(e.which===t.keyCode.BACKSPACE||e.which===t.keyCode.ENTER)&&r.previousElementSibling&&c.test(s)&&0===o.getCaretOffsets(r).left?e.which===t.keyCode.BACKSPACE&&l.test(r.previousElementSibling.innerHTML)?(r.previousElementSibling.parentNode.removeChild(r.previousElementSibling),e.preventDefault()):e.which===t.keyCode.ENTER&&(a=this.options.ownerDocument.createElement("p"),a.innerHTML="<br>",r.previousElementSibling.parentNode.insertBefore(a,r),e.preventDefault()):e.which===t.keyCode.DELETE&&r.nextElementSibling&&r.previousElementSibling&&!c.test(s)&&l.test(r.innerHTML)&&c.test(r.nextElementSibling.tagName)?(n=this.options.ownerDocument.createRange(),i=this.options.ownerDocument.getSelection(),n.setStart(r.nextElementSibling,0),n.collapse(!0),i.removeAllRanges(),i.addRange(n),r.previousElementSibling.parentNode.removeChild(r),e.preventDefault()):e.which!==t.keyCode.BACKSPACE||"li"!==s||!l.test(r.innerHTML)||r.previousElementSibling||r.parentElement.previousElementSibling||"li"!==r.nextElementSibling.tagName.toLowerCase()||(a=this.options.ownerDocument.createElement("p"),a.innerHTML="<br>",r.parentElement.parentElement.insertBefore(a,r.parentElement),n=this.options.ownerDocument.createRange(),i=this.options.ownerDocument.getSelection(),n.setStart(a,0),n.collapse(!0),i.removeAllRanges(),i.addRange(n),r.parentElement.removeChild(r),e.preventDefault())}function v(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)}function b(e){var n,i="medium-editor-dragover";e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(n=Array.prototype.slice.call(e.dataTransfer.files,0),n.some(function(e){if(e.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(e),i="medium-img-"+ +new Date,t.insertHTMLCommand(this.options.ownerDocument,'<img class="medium-image-loading" id="'+i+'" />'),n.onload=function(){var e=this.options.ownerDocument.getElementById(i);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this)}}.bind(this))),e.target.classList.remove(i)}function w(e){var n,i=t.getSelectionStart(this.options.ownerDocument);i&&(i.getAttribute("data-medium-element")&&0===i.children.length&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),e.which!==t.keyCode.ENTER||t.isListItem(i)||(n=i.tagName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||/h\d/.test(n)||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function y(e){e||(e=[]),"string"==typeof e&&(e=this.options.ownerDocument.querySelectorAll(e)),t.isElement(e)&&(e=[e]);var n=Array.prototype.slice.apply(e);this.elements=[],n.forEach(function(e){this.elements.push("textarea"===e.tagName.toLowerCase()?C.call(this,e):e)},this)}function k(e,t,n){return e.parent&&(e.base=n),"function"==typeof e.init&&e.init(n),e.name||(e.name=t),e}function $(){var e,t=!1;if(this.options.disableAnchorPreview)return!1;if(this.options.extensions["anchor-preview"])return!1;if(this.options.disableToolbar)return!1;for(e=0;e<this.elements.length;e+=1)if(!this.elements[e].getAttribute("data-disable-toolbar")){t=!0;break}return t}function C(e){var t=this.options.ownerDocument.createElement("div"),n=+new Date,i=["data-disable-editing","data-disable-toolbar","data-placeholder","data-disable-return","data-disable-double-return","data-disable-preview","spellcheck"];return t.className=e.className,t.id=n,t.innerHTML=e.value,t.setAttribute("medium-editor-textarea-id",n),i.forEach(function(n){e.hasAttribute(n)&&t.setAttribute(n,e.getAttribute(n))}),e.classList.add("medium-editor-hidden"),e.setAttribute("medium-editor-textarea-id",n),e.parentNode.insertBefore(t,e),t}function x(){this.elements.forEach(function(e){this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.options.placeholder),e.setAttribute("data-medium-element",!0),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.hasAttribute("medium-editor-textarea-id")&&this.on(e,"input",function(e){var t=e.target,n=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=this.serialize()[t.id].value)}.bind(this))},this)}function D(){if(this.toolbar||this.options.disableToolbar)return!1;var e=this.elements.some(function(e){return!e.getAttribute("data-disable-toolbar")});e&&(this.toolbar=new p(this),this.options.elementsContainer.appendChild(this.toolbar.getToolbarElement()))}function E(){var e;if(this.subscribe("editableKeydownTab",f.bind(this)),this.subscribe("editableKeydownDelete",g.bind(this)),this.subscribe("editableKeydownEnter",g.bind(this)),this.options.disableReturn||this.options.disableDoubleReturn)this.subscribe("editableKeydownEnter",l.bind(this));else for(e=0;e<this.elements.length;e+=1)if(this.elements[e].getAttribute("data-disable-return")||this.elements[e].getAttribute("data-disable-double-return")){this.subscribe("editableKeydownEnter",l.bind(this));break}this.options.disableReturn||this.elements.forEach(function(e){e.getAttribute("data-disable-return")||this.on(e,"keyup",w.bind(this))},this),this.options.imageDragging&&(this.subscribe("editableDrag",v.bind(this)),this.subscribe("editableDrop",b.bind(this)))}function T(n){var i={forcePlainText:this.options.forcePlainText,cleanPastedHTML:this.options.cleanPastedHTML,disableReturn:this.options.disableReturn,targetBlank:this.options.targetBlank,window:this.options.contentWindow,document:this.options.ownerDocument};return new e.extensions.paste(t.extend({},n,i))}function A(){var e,t,i=this.options.buttons,a=this.options.extensions;this.commands=[],i.forEach(function(t){a[t]?(e=k(a[t],t,this),this.commands.push(e)):"anchor"===t?(e=k(new c,t,this),this.commands.push(e)):"fontsize"===t?(e=k(new d,t,this),this.commands.push(e)):n.hasOwnProperty(t)&&(e=new s(n[t],this),this.commands.push(e))},this);for(t in a)a.hasOwnProperty(t)&&-1===i.indexOf(t)&&(e=k(a[t],t,this),this.commands.push(e));this.options.extensions.paste||this.commands.push(k(T.call(this,this.options.paste),"paste",this)),$.call(this)&&this.commands.push(k(new u,"anchor-preview",this))}function S(e,n){n&&[["forcePlainText","paste.forcePlainText"],["cleanPastedHTML","paste.cleanPastedHTML"]].forEach(function(e){n.hasOwnProperty(e[0])&&void 0!==n[e[0]]&&t.deprecated(e[0],e[1],"v5.0.0")});var i=["paste"],a=t.extend({},n);return i.forEach(function(n){a[n]=a[n]?t.defaults({},a[n],e[n]):e[n]}),t.defaults(a,e)}function M(e,n){var i,a=/^append-(.+)$/gi;return i=a.exec(e),i?t.execFormatBlock(this.options.ownerDocument,i[1]):"fontSize"===e?this.options.ownerDocument.execCommand("fontSize",!1,n.size):"createLink"===e?this.createLink(n):"image"===e?this.options.ownerDocument.execCommand("insertImage",!1,this.options.contentWindow.getSelection()):this.options.ownerDocument.execCommand(e,!1,null)}e.statics={ButtonsData:n,DefaultButton:s,AnchorExtension:c,FontSizeExtension:d,Toolbar:p,AnchorPreview:u},e.Extension=a,e.extensions=m,e.util=t,e.selection=o,e.prototype={defaults:i,init:function(e,t){var n=1;if(this.options=S.call(this,this.defaults,t),y.call(this,e),0!==this.elements.length){for(this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body);this.options.elementsContainer.querySelector("#medium-editor-toolbar-"+n);)n+=1;return this.id=n,this.setup()}},setup:function(){this.isActive||(this.events=new r(this),this.isActive=!0,x.call(this),A.call(this),D.call(this),E.call(this),this.options.disablePlaceholders||(this.placeholders=new h(this)))},destroy:function(){if(this.isActive){var e;for(this.isActive=!1,void 0!==this.toolbar&&(this.toolbar.deactivate(),delete this.toolbar),e=0;e<this.elements.length;e+=1)this.elements[e].removeAttribute("contentEditable"),this.elements[e].removeAttribute("spellcheck"),this.elements[e].removeAttribute("data-medium-element");this.commands.forEach(function(e){"function"==typeof e.deactivate&&e.deactivate()},this),this.events.detachAllDOMEvents(),this.events.detachAllCustomEvents()}},on:function(e,t,n,i){this.events.attachDOMEvent(e,t,n,i)},off:function(e,t,n,i){this.events.detachDOMEvent(e,t,n,i)},subscribe:function(e,t){this.events.attachCustomEvent(e,t)},unsubscribe:function(e,t){this.events.detachCustomEvent(e,t)},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,n={};for(e=0;e<this.elements.length;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},getExtensionByName:function(e){var t;return this.commands&&this.commands.length&&this.commands.some(function(n){return n.name===e?(t=n,!0):!1}),t},callExtensions:function(e){if(!(arguments.length<1)){var t,n,i=Array.prototype.slice.call(arguments,1);for(n in this.options.extensions)this.options.extensions.hasOwnProperty(n)&&(t=this.options.extensions[n],void 0!==t[e]&&t[e].apply(t,i));return this}},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){return this.toolbar&&this.toolbar.checkState(),this},queryCommandState:function(e){var t,n=/^full-(.+)$/gi,i=null;t=n.exec(e),t&&(e=t[1]);try{i=this.options.ownerDocument.queryCommandState(e)}catch(a){i=null}return i},execAction:function(e,n){var i,a,o=/^full-(.+)$/gi;return i=o.exec(e),i?(this.saveSelection(),this.selectAllContents(),a=M.call(this,i[1],n),this.restoreSelection()):a=M.call(this,e,n),("insertunorderedlist"===e||"insertorderedlist"===e)&&t.cleanListDOM(this.getSelectedParentElement()),this.checkSelection(),a},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),o.getSelectedParentElement(e)},hideToolbarDefaultActions:function(){return this.toolbar&&this.toolbar.hideToolbarDefaultActions(),this},setToolbarPosition:function(){this.toolbar&&this.toolbar.setToolbarPosition()},selectAllContents:function(){var e=o.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){o.selectNode(e,this.options.ownerDocument);var t=o.getSelectionElement(this.options.contentWindow);t&&this.events.focusElement(t)},exportSelection:function(){var e,n,i,a=null,o=this.options.contentWindow.getSelection(),r=-1;return o.rangeCount>0&&(e=o.getRangeAt(0),n=e.cloneRange(),this.elements.some(function(n,i){return n===e.startContainer||t.isDescendant(n,e.startContainer)?(r=i,!0):!1}),r>-1&&(n.selectNodeContents(this.elements[r]),n.setEnd(e.startContainer,e.startOffset),i=n.toString().length,a={start:i,end:i+e.toString().length,editableElementIndex:r})),null!==a&&0===a.editableElementIndex&&delete a.editableElementIndex,a},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e){if(e){var t,n,i,a,o=void 0===e.editableElementIndex?0:e.editableElementIndex,r={editableElementIndex:o,start:e.start,end:e.end},s=this.elements[r.editableElementIndex],l=0,c=this.options.ownerDocument.createRange(),u=[s],d=!1,p=!1;for(c.setStart(s,0),c.collapse(!0),t=u.pop();!p&&t;){if(3===t.nodeType)a=l+t.length,!d&&r.start>=l&&r.start<=a&&(c.setStart(t,r.start-l),d=!0),d&&r.end>=l&&r.end<=a&&(c.setEnd(t,r.end-l),p=!0),l=a;else for(n=t.childNodes.length-1;n>=0;)u.push(t.childNodes[n]),n-=1;p||(t=u.pop())}i=this.options.contentWindow.getSelection(),i.removeAllRanges(),i.addRange(c)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var n,i;if(e.url&&e.url.trim().length>0&&(this.options.ownerDocument.execCommand("createLink",!1,e.url),(this.options.targetBlank||"_blank"===e.target)&&t.setTargetBlank(t.getSelectionStart(this.options.ownerDocument)),e.buttonClass&&t.addClassToAnchors(t.getSelectionStart(this.options.ownerDocument),e.buttonClass)),this.options.targetBlank||"_blank"===e.target||e.buttonClass)for(n=this.options.ownerDocument.createEvent("HTMLEvents"),n.initEvent("input",!0,!0,this.options.contentWindow),i=0;i<this.elements.length;i+=1)this.elements[i].dispatchEvent(n)},activate:function(){t.deprecatedMethod.call(this,"activate","setup",arguments,"v5.0.0")},deactivate:function(){t.deprecatedMethod.call(this,"deactivate","destroy",arguments,"v5.0.0")},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)}}}(),e.version=function(e,t,n){return{major:parseInt(e,10),minor:parseInt(t,10),revision:parseInt(n,10),toString:function(){return[e,t,n].join(".")}}}.apply(this,{version:"4.7.0"}.version.split(".")),e}()),angular.module("angular-medium-editor",[]).directive("mediumEditor",function(){return{require:"ngModel",restrict:"AE",scope:{bindOptions:"="},link:function(e,t,n,i){angular.element(t).addClass("angular-medium-editor");var a={},o="",r=function(){n.options&&(a=e.$eval(n.options));var t={};void 0!==e.bindOptions&&(t=e.bindOptions),a=angular.extend(a,t)
};r(),o=a.placeholder,e.$watch("bindOptions",function(){i.editor&&i.editor.destroy(),r(),i.$isEmpty(i.$viewValue)||(a.placeholder=""),i.editor=new MediumEditor(t,a)});var s=function(){e.$apply(function(){if("<p><br></p>"===t.html()||""===t.html()){a.placeholder=o;{new MediumEditor(t,a)}}i.$setViewValue(t.html())})};t.on("blur",s),t.on("input",s),i.$render=function(){this.editor||(i.$isEmpty(i.$viewValue)||(a.placeholder=""),this.editor=new MediumEditor(t,a)),t.html(i.$isEmpty(i.$viewValue)?"":i.$viewValue),i.$isEmpty(i.$viewValue)||angular.element(t).removeClass("medium-editor-placeholder")}}}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(e){return{link:function(t,n,i){function a(){n.removeClass("collapse").addClass("collapsing"),e.addClass(n,"in",{to:{height:n[0].scrollHeight+"px"}}).then(o)}function o(){n.removeClass("collapsing"),n.css({height:"auto"})}function r(){n.css({height:n[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing"),e.removeClass(n,"in",{to:{height:"0"}}).then(s)}function s(){n.css({height:"0"}),n.removeClass("collapsing"),n.addClass("collapse")}t.$watch(i.collapse,function(e){e?r():a()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var a=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;a&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.$watch("isOpen",function(t){t&&i.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,i,a){i.setHeading(a(e,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,i){e.$watch(function(){return i[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,n,i,a){e(function(){a.close()},parseInt(i.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){var a=i[0],o=i[1];o.$render=function(){t.toggleClass(a.activeClass,angular.equals(o.$modelValue,e.$eval(n.btnRadio)))},t.bind(a.toggleEvent,function(){var i=t.hasClass(a.activeClass);(!i||angular.isDefined(n.uncheckable))&&e.$apply(function(){o.$setViewValue(i?null:e.$eval(n.btnRadio)),o.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){function a(){return r(n.btnCheckboxTrue,!0)}function o(){return r(n.btnCheckboxFalse,!1)}function r(t,n){var i=e.$eval(t);return angular.isDefined(i)?i:n}var s=i[0],l=i[1];l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,a()))},t.bind(s.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?o():a()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$interval","$animate",function(e,t,n){function i(e){if(angular.isUndefined(u[e].index))return u[e];{var t;u.length}for(t=0;t<u.length;++t)if(u[t].index==e)return u[t]}function a(){o();var n=+e.interval;!isNaN(n)&&n>0&&(s=t(r,n))}function o(){s&&(t.cancel(s),s=null)}function r(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var s,l,c=this,u=c.slides=e.slides=[],d=-1;c.currentSlide=null;var p=!1;c.select=e.select=function(t,i){function o(){p||(angular.extend(t,{direction:i,active:!0}),angular.extend(c.currentSlide||{},{direction:i,active:!1}),n.enabled()&&!e.noTransition&&t.$element&&(e.$currentTransition=!0,t.$element.one("$animate:close",function(){e.$currentTransition=null})),c.currentSlide=t,d=r,a())}var r=c.indexOfSlide(t);void 0===i&&(i=r>c.getCurrentIndex()?"next":"prev"),t&&t!==c.currentSlide&&o()},e.$on("$destroy",function(){p=!0}),c.getCurrentIndex=function(){return c.currentSlide&&angular.isDefined(c.currentSlide.index)?+c.currentSlide.index:d},c.indexOfSlide=function(e){return angular.isDefined(e.index)?+e.index:u.indexOf(e)},e.next=function(){var t=(c.getCurrentIndex()+1)%u.length;return e.$currentTransition?void 0:c.select(i(t),"next")},e.prev=function(){var t=c.getCurrentIndex()-1<0?u.length-1:c.getCurrentIndex()-1;return e.$currentTransition?void 0:c.select(i(t),"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",a),e.$on("$destroy",o),e.play=function(){l||(l=!0,a())},e.pause=function(){e.noPause||(l=!1,o())},c.addSlide=function(t,n){t.$element=n,u.push(t),1===u.length||t.active?(c.select(u[u.length-1]),1==u.length&&e.play()):t.active=!1},c.removeSlide=function(e){angular.isDefined(e.index)&&u.sort(function(e,t){return+e.index>+t.index});var t=u.indexOf(e);u.splice(t,1),u.length>0&&e.active?c.select(t>=u.length?u[t-1]:u[t]):d>t&&d--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?",index:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}).animation(".item",["$animate",function(e){return{beforeAddClass:function(t,n,i){if("active"==n&&t.parent()&&!t.parent().scope().noTransition){var a=!1,o=t.isolateScope().direction,r="next"==o?"left":"right";return t.addClass(o),e.addClass(t,r).then(function(){a||t.removeClass(r+" "+o),i()}),function(){a=!0}}i()},beforeRemoveClass:function(t,n,i){if("active"==n&&t.parent()&&!t.parent().scope().noTransition){var a=!1,o=t.isolateScope().direction,r="next"==o?"left":"right";return e.addClass(t,r).then(function(){a||t.removeClass(r),i()}),function(){a=!0}}i()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e){var n=[],i=e.split("");return angular.forEach(o,function(t,a){var o=e.indexOf(a);if(o>-1){e=e.split(""),i[o]="("+t.regex+")",e[o]="$";for(var r=o+1,s=o+a.length;s>r;r++)i[r]="",e[r]="$";e=e.join(""),n.push({index:o,apply:t.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:t(n,"index")}}function i(e,t,n){return 1>n?!1:1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}var a=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var o={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e}},H:{regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e}},mm:{regex:"[0-5][0-9]",apply:function(e){this.minutes=+e}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e}},sss:{regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e}},ss:{regex:"[0-5][0-9]",apply:function(e){this.seconds=+e}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e}}};this.parse=function(t,o,r){if(!angular.isString(t)||!o)return t;o=e.DATETIME_FORMATS[o]||o,o=o.replace(a,"\\$&"),this.parsers[o]||(this.parsers[o]=n(o));var s=this.parsers[o],l=s.regex,c=s.map,u=t.match(l);if(u&&u.length){var d,p;d=r?{year:r.getFullYear(),month:r.getMonth(),date:r.getDate(),hours:r.getHours(),minutes:r.getMinutes(),seconds:r.getSeconds(),milliseconds:r.getMilliseconds()}:{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0};for(var h=1,m=u.length;m>h;h++){var f=c[h-1];f.apply&&f.apply.call(d,u[h])}return i(d.year,d.month,d.date)&&(p=new Date(d.year,d.month,d.date,d.hours,d.minutes,d.seconds,d.milliseconds||0)),p}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var a=function(t){for(var n=e[0],a=t.offsetParent||n;a&&a!==n&&i(a);)a=a.offsetParent;return a||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},o=a(t[0]);o!=e[0]&&(i=this.offset(angular.element(o)),i.top+=o.clientTop-o.scrollTop,i.left+=o.clientLeft-o.scrollLeft);var r=t[0].getBoundingClientRect();return{width:r.width||t.prop("offsetWidth"),height:r.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var a,o,r,s,l=n.split("-"),c=l[0],u=l[1]||"center";a=i?this.offset(e):this.position(e),o=t.prop("offsetWidth"),r=t.prop("offsetHeight");var d={center:function(){return a.left+a.width/2-o/2},left:function(){return a.left},right:function(){return a.left+a.width}},p={center:function(){return a.top+a.height/2-r/2},top:function(){return a.top},bottom:function(){return a.top+a.height}};switch(c){case"right":s={top:p[u](),left:d[c]()};break;case"left":s={top:p[u](),left:a.left-o};break;case"bottom":s={top:p[c](),left:d[u]()};break;default:s={top:a.top-r,left:d[u]()}}return s}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,i,a,o,r,s){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange","shortcutPropagation"],function(n,a){l[n]=angular.isDefined(t[n])?8>a?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){l[i]=e?new Date(e):null,l.refreshView()}):l[i]=s[i]?new Date(s[i]):null}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.maxMode=l.maxMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,function(e){e&&(c.$isEmpty(c.$modelValue)||c.$invalid)&&(l.activeDate=e,l.refreshView())})):this.activeDate=new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$viewValue){var e=new Date(c.$viewValue),t=!isNaN(e);t?this.activeDate=e:o.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$viewValue?new Date(c.$viewValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$viewValue?new Date(c.$viewValue):null;return{date:e,label:r(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$viewValue?new Date(c.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){a(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),l.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,i){var a=i[0],o=i[1];o&&a.init(o)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,i,a){function o(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function r(e,t){var n=new Array(t),i=new Date(e),a=0;for(i.setHours(12);t>a;)n[a++]=new Date(i),i.setDate(i.getDate()+1);return n}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=a.showWeeks,a.step={months:1},a.element=n;var l=[31,28,31,30,31,30,31,31,30,31,30,31];a._refreshView=function(){var n=a.activeDate.getFullYear(),i=a.activeDate.getMonth(),o=new Date(n,i,1),l=a.startingDay-o.getDay(),c=l>0?7-l:-l,u=new Date(o);c>0&&u.setDate(-c+1);for(var d=r(u,42),p=0;42>p;p++)d[p]=angular.extend(a.createDateObject(d[p],a.formatDay),{secondary:d[p].getMonth()!==i,uid:t.uniqueId+"-"+p});t.labels=new Array(7);for(var h=0;7>h;h++)t.labels[h]={abbr:e(d[h].date,a.formatDayHeader),full:e(d[h].date,"EEEE")};if(t.title=e(a.activeDate,a.formatDayTitle),t.rows=a.split(d,7),t.showWeeks){t.weekNumbers=[];for(var m=(11-a.startingDay)%7,f=t.rows.length,g=0;f>g;g++)t.weekNumbers.push(s(t.rows[g][m].date))}},a.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},a.handleKeyDown=function(e){var t=a.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var n=a.activeDate.getMonth()+("pageup"===e?-1:1);a.activeDate.setMonth(n,1),t=Math.min(o(a.activeDate.getFullYear(),a.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=o(a.activeDate.getFullYear(),a.activeDate.getMonth()));a.activeDate.setDate(t)},a.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,i,a){a.step={years:1},a.element=n,a._refreshView=function(){for(var n=new Array(12),i=a.activeDate.getFullYear(),o=0;12>o;o++)n[o]=angular.extend(a.createDateObject(new Date(i,o,1),a.formatMonth),{uid:t.uniqueId+"-"+o});t.title=e(a.activeDate,a.formatMonthTitle),t.rows=a.split(n,3)},a.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},a.handleKeyDown=function(e){var t=a.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var n=a.activeDate.getFullYear()+("pageup"===e?-1:1);a.activeDate.setFullYear(n)}else"home"===e?t=0:"end"===e&&(t=11);a.activeDate.setMonth(t)},a.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,i){function a(e){return parseInt((e-1)/o,10)*o+1}var o=i.yearRange;i.step={years:o},i.element=t,i._refreshView=function(){for(var t=new Array(o),n=0,r=a(i.activeDate.getFullYear());o>n;n++)t[n]=angular.extend(i.createDateObject(new Date(r+n,0,1),i.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[o-1].label].join(" - "),e.rows=i.split(t,5)},i.compare=function(e,t){return e.getFullYear()-t.getFullYear()},i.handleKeyDown=function(e){var t=i.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*i.step.years:"home"===e?t=a(i.activeDate.getFullYear()):"end"===e&&(t=a(i.activeDate.getFullYear())+o-1),i.activeDate.setFullYear(t)},i.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,i,a,o,r){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(s,l,c,u){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function p(e){if(angular.isNumber(e)&&(e=new Date(e)),e){if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=o.parse(e,m,s.date)||new Date(e);return isNaN(t)?void 0:t}return void 0}return null}function h(e,t){var n=e||t;if(angular.isNumber(n)&&(n=new Date(n)),n){if(angular.isDate(n)&&!isNaN(n))return!0;if(angular.isString(n)){var i=o.parse(n,m)||new Date(n);return!isNaN(i)}return!1}return!0}var m,f=angular.isDefined(c.closeOnDateSelection)?s.$parent.$eval(c.closeOnDateSelection):r.closeOnDateSelection,g=angular.isDefined(c.datepickerAppendToBody)?s.$parent.$eval(c.datepickerAppendToBody):r.appendToBody;s.showButtonBar=angular.isDefined(c.showButtonBar)?s.$parent.$eval(c.showButtonBar):r.showButtonBar,s.getText=function(e){return s[e+"Text"]||r[e+"Text"]};var v=!1;if(r.html5Types[c.type]?(m=r.html5Types[c.type],v=!0):(m=c.datepickerPopup||r.datepickerPopup,c.$observe("datepickerPopup",function(e){var t=e||r.datepickerPopup;if(t!==m&&(m=t,u.$modelValue=null,!m))throw new Error("datepickerPopup must have a date format specified.")})),!m)throw new Error("datepickerPopup must have a date format specified.");if(v&&c.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var b=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");b.attr({"ng-model":"date","ng-change":"dateSelection()"});var w=angular.element(b.children()[0]);if(v&&"month"==c.type&&(w.attr("datepicker-mode",'"month"'),w.attr("min-mode","month")),c.datepickerOptions){var y=s.$parent.$eval(c.datepickerOptions);y.initDate&&(s.initDate=y.initDate,w.attr("init-date","initDate"),delete y.initDate),angular.forEach(y,function(e,t){w.attr(d(t),e)})}s.watchData={},angular.forEach(["minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(e){if(c[e]){var n=t(c[e]);if(s.$parent.$watch(n,function(t){s.watchData[e]=t}),w.attr(d(e),"watchData."+e),"datepickerMode"===e){var i=n.assign;s.$watch("watchData."+e,function(e,t){e!==t&&i(s.$parent,e)})}}}),c.dateDisabled&&w.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),c.showWeeks&&w.attr("show-weeks",c.showWeeks),c.customClass&&w.attr("custom-class","customClass({ date: date, mode: mode })"),v?u.$formatters.push(function(e){return s.date=e,e}):(u.$$parserName="date",u.$validators.date=h,u.$parsers.unshift(p),u.$formatters.push(function(e){return s.date=e,u.$isEmpty(e)?e:a(e,m)})),s.dateSelection=function(e){angular.isDefined(e)&&(s.date=e);var t=s.date?a(s.date,m):"";l.val(t),u.$setViewValue(t),f&&(s.isOpen=!1,l[0].focus())},u.$viewChangeListeners.push(function(){s.date=o.parse(u.$viewValue,m,s.date)||new Date(u.$viewValue)});var k=function(e){s.isOpen&&e.target!==l[0]&&s.$apply(function(){s.isOpen=!1})},$=function(e){s.keydown(e)};l.bind("keydown",$),s.keydown=function(e){27===e.which?(e.preventDefault(),s.isOpen&&e.stopPropagation(),s.close()):40!==e.which||s.isOpen||(s.isOpen=!0)},s.$watch("isOpen",function(e){e?(s.$broadcast("datepicker.focus"),s.position=g?i.offset(l):i.position(l),s.position.top=s.position.top+l.prop("offsetHeight"),n.bind("click",k)):n.unbind("click",k)}),s.select=function(e){if("today"===e){var t=new Date;angular.isDate(s.date)?(e=new Date(s.date),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}s.dateSelection(e)},s.close=function(){s.isOpen=!1,l[0].focus()};var C=e(b)(s);b.remove(),g?n.find("body").append(C):l.after(C),s.$on("$destroy",function(){C.remove(),l.unbind("keydown",$),n.unbind("click",k)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t){n||(e.bind("click",i),e.bind("keydown",a)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t){n===t&&(n=null,e.unbind("click",i),e.unbind("keydown",a))};var i=function(e){if(n&&(!e||"disabled"!==n.getAutoClose())){var i=n.getToggleElement();if(!(e&&i&&i[0].contains(e.target))){var a=n.getElement();e&&"outsideClick"===n.getAutoClose()&&a&&a[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},a=function(e){27===e.which&&(n.focusToggleElement(),i())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document",function(e,t,n,i,a,o,r,s){var l,c=this,u=e.$new(),d=i.openClass,p=angular.noop,h=t.onToggle?n(t.onToggle):angular.noop,m=!1;this.init=function(i){c.$element=i,t.isOpen&&(l=n(t.isOpen),p=l.assign,e.$watch(l,function(e){u.isOpen=!!e})),m=angular.isDefined(t.dropdownAppendToBody),m&&c.dropdownMenu&&(s.find("body").append(c.dropdownMenu),i.on("$destroy",function(){c.dropdownMenu.remove()}))},this.toggle=function(e){return u.isOpen=arguments.length?!!e:!u.isOpen},this.isOpen=function(){return u.isOpen},u.getToggleElement=function(){return c.toggleElement},u.getAutoClose=function(){return t.autoClose||"always"},u.getElement=function(){return c.$element},u.focusToggleElement=function(){c.toggleElement&&c.toggleElement[0].focus()},u.$watch("isOpen",function(t,n){if(m&&c.dropdownMenu){var i=r.positionElements(c.$element,c.dropdownMenu,"bottom-left",!0);c.dropdownMenu.css({top:i.top+"px",left:i.left+"px",display:t?"block":"none"})}o[t?"addClass":"removeClass"](c.$element,d),t?(u.focusToggleElement(),a.open(u)):a.close(u),p(e,t),angular.isDefined(t)&&t!==n&&h(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){u.isOpen=!1}),e.$on("$destroy",function(){u.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,i){i.init(t)}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(e,t,n,i){i&&(i.dropdownMenu=t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,i){if(i){i.toggleElement=t;var a=function(a){a.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.bind("click",a),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",a)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){function t(t){t.animate=!1,e(function(){t.animate=!0})}return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(e,n){return e.addClass(n.backdropClass),t}}}]).directive("modalWindow",["$modalStack","$q",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,i,a){i.addClass(a.windowClass||""),n.size=a.size,n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},n.$isRendered=!0;var o=t.defer();a.$observe("modalRender",function(e){"true"==e&&o.resolve()}),o.promise.then(function(){n.animate=!0;var t=i[0].querySelectorAll("[autofocus]");t.length?t[0].focus():i[0].focus();var a=e.getTop();a&&e.modalRendered(a.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,i,a){a(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,i,a,o){function r(){for(var e=-1,t=m.keys(),n=0;n<t.length;n++)m.get(t[n]).value.backdrop&&(e=n);return e}function s(e){var t=n.find("body").eq(0),i=m.get(e).value;m.remove(e),c(i.modalDomEl,i.modalScope,function(){t.toggleClass(h,m.length()>0),l()})}function l(){if(d&&-1==r()){var e=p;c(d,p,function(){e=null}),d=void 0,p=void 0}}function c(n,i,o){function r(){r.done||(r.done=!0,n.remove(),i.$destroy(),o&&o())}i.animate=!1,n.attr("modal-animation")&&e.enabled()?n.one("$animate:close",function(){a.$evalAsync(r)}):t(r)}function u(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}var d,p,h="modal-open",m=o.createNew(),f={};return a.$watch(r,function(e){p&&(p.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=m.top(),t&&t.value.keyboard&&(e.preventDefault(),a.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){var o=n[0].activeElement;m.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var s=n.find("body").eq(0),l=r();if(l>=0&&!d){p=a.$new(!0),p.index=l;var c=angular.element('<div modal-backdrop="modal-backdrop"></div>');c.attr("backdrop-class",t.backdropClass),t.animation&&c.attr("modal-animation","true"),d=i(c)(p),s.append(d)}var u=angular.element('<div modal-window="modal-window"></div>');u.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:m.length()-1,animate:"animate"}).html(t.content),t.animation&&u.attr("modal-animation","true");var f=i(u)(t.scope);m.top().value.modalDomEl=f,m.top().value.modalOpener=o,s.append(f),s.addClass(h)},f.close=function(e,t){var n=m.get(e);return n&&u(n,t,!0)?(n.value.deferred.resolve(t),s(e),n.value.modalOpener.focus(),!0):!n},f.dismiss=function(e,t){var n=m.get(e);return n&&u(n,t,!1)?(n.value.deferred.reject(t),s(e),n.value.modalOpener.focus(),!0):!n},f.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},f.getTop=function(){return m.top()},f.modalRendered=function(e){var t=m.get(e);t&&t.value.renderDeferred.resolve()},f}]).provider("$modal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(t,n,i,a,o,r){function s(e){return e.template?i.when(e.template):a(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}function l(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(i.when(t.invoke(e)))}),n}var c={};return c.open=function(t){var a=i.defer(),c=i.defer(),u=i.defer(),d={result:a.promise,opened:c.promise,rendered:u.promise,close:function(e){return r.close(d,e)
},dismiss:function(e){return r.dismiss(d,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var p=i.all([s(t)].concat(l(t.resolve)));return p.then(function(e){var i=(t.scope||n).$new();i.$close=d.close,i.$dismiss=d.dismiss;var s,l={},c=1;t.controller&&(l.$scope=i,l.$modalInstance=d,angular.forEach(t.resolve,function(t,n){l[n]=e[c++]}),s=o(t.controller,l),t.controllerAs&&(i[t.controllerAs]=s)),r.open(d,{scope:i,deferred:a,renderDeferred:u,content:e[0],animation:t.animation,backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){a.reject(e)}),p.then(function(){c.resolve(!0)},function(e){c.reject(e)}),d},c}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var i=this,a={$setViewValue:angular.noop},o=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(r,s){a=r,this.config=s,a.$render=function(){i.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=s.itemsPerPage,e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){o(e.$parent,t),e.page>t?e.selectPage(t):a.$render()})},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(a.$viewValue,10)||1},e.selectPage=function(t,n){e.page!==t&&t>0&&t<=e.totalPages&&(n&&n.target&&n.target.blur(),a.$setViewValue(t),a.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,i,a,o){function r(e,t,n){return{number:e,text:t,active:n}}function s(e,t){var n=[],i=1,a=t,o=angular.isDefined(u)&&t>u;o&&(d?(i=Math.max(e-Math.floor(u/2),1),a=i+u-1,a>t&&(a=t,i=a-u+1)):(i=(Math.ceil(e/u)-1)*u+1,a=Math.min(i+u-1,t)));for(var s=i;a>=s;s++){var l=r(s,s,s===e);n.push(l)}if(o&&!d){if(i>1){var c=r(i-1,"...",!1);n.unshift(c)}if(t>a){var p=r(a+1,"...",!1);n.push(p)}}return n}var l=o[0],c=o[1];if(c){var u=angular.isDefined(a.maxSize)?n.$parent.$eval(a.maxSize):t.maxSize,d=angular.isDefined(a.rotate)?n.$parent.$eval(a.rotate):t.rotate;n.boundaryLinks=angular.isDefined(a.boundaryLinks)?n.$parent.$eval(a.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(a.directionLinks)?n.$parent.$eval(a.directionLinks):t.directionLinks,l.init(c,t),a.maxSize&&n.$parent.$watch(e(a.maxSize),function(e){u=parseInt(e,10),l.render()});var p=l.render;l.render=function(){p(),n.page>0&&n.page<=n.totalPages&&(n.pages=s(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"\xab Previous",nextText:"Next \xbb",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,i,a){var o=a[0],r=a[1];r&&(t.align=angular.isDefined(i.align)?t.$parent.$eval(i.align):e.align,o.init(r,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},n={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(a,o,r,s,l,c){return function(a,u,d,p){function h(e){var t=e||p.trigger||d,i=n[t]||t;return{show:t,hide:i}}p=angular.extend({},t,i,p);var m=e(a),f=c.startSymbol(),g=c.endSymbol(),v="<div "+m+'-popup title="'+f+"title"+g+'" '+(p.useContentExp?'content-exp="contentExp()" ':'content="'+f+"content"+g+'" ')+'placement="'+f+"placement"+g+'" popup-class="'+f+"popupClass"+g+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(){var e=o(v);return function(t,n,i){function o(){M.isOpen?d():c()}function c(){(!S||t.$eval(i[u+"Enable"]))&&(b(),M.popupDelay?E||(E=r(m,M.popupDelay,!1),E.then(function(e){e()})):m()())}function d(){t.$apply(function(){f()})}function m(){return E=null,D&&(r.cancel(D),D=null),(p.useContentExp?M.contentExp():M.content)?(g(),C.css({top:0,left:0,display:"block"}),M.$digest(),P(),M.isOpen=!0,M.$apply(),P):angular.noop}function f(){M.isOpen=!1,r.cancel(E),E=null,M.animation?D||(D=r(v,500)):v()}function g(){C&&v(),x=M.$new(),C=e(x,function(e){T?s.find("body").append(e):n.after(e)}),x.$watch(function(){r(P,0,!1)}),p.useContentExp&&x.$watch("contentExp()",function(e){!e&&M.isOpen&&f()})}function v(){D=null,C&&(C.remove(),C=null),x&&(x.$destroy(),x=null)}function b(){w(),y(),k()}function w(){M.popupClass=i[u+"Class"]}function y(){var e=i[u+"Placement"];M.placement=angular.isDefined(e)?e:p.placement}function k(){var e=i[u+"PopupDelay"],t=parseInt(e,10);M.popupDelay=isNaN(t)?p.popupDelay:t}function $(){var e=i[u+"Trigger"];O(),A=h(e),A.show===A.hide?n.bind(A.show,o):(n.bind(A.show,c),n.bind(A.hide,d))}var C,x,D,E,T=angular.isDefined(p.appendToBody)?p.appendToBody:!1,A=h(void 0),S=angular.isDefined(i[u+"Enable"]),M=t.$new(!0),P=function(){if(C){var e=l.positionElements(n,C,M.placement,T);e.top+="px",e.left+="px",C.css(e)}};M.origScope=t,M.isOpen=!1,M.contentExp=function(){return t.$eval(i[a])},p.useContentExp||i.$observe(a,function(e){M.content=e,!e&&M.isOpen&&f()}),i.$observe("disabled",function(e){e&&M.isOpen&&f()}),i.$observe(u+"Title",function(e){M.title=e});var O=function(){n.unbind(A.show,c),n.unbind(A.hide,d)};$();var N=t.$eval(i[u+"Animation"]);M.animation=angular.isDefined(N)?!!N:p.animation;var L=t.$eval(i[u+"AppendToBody"]);T=angular.isDefined(L)?L:T,T&&t.$on("$locationChangeSuccess",function(){M.isOpen&&f()}),t.$on("$destroy",function(){r.cancel(D),r.cancel(E),O(),v(),M=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,i){return{link:function(a,o,r){var s,l,c,u=a.$eval(r.tooltipTemplateTranscludeScope),d=0,p=function(){l&&(l.remove(),l=null),s&&(s.$destroy(),s=null),c&&(e.leave(c).then(function(){l=null}),l=c,c=null)};a.$watch(t.parseAsResourceUrl(r.tooltipTemplateTransclude),function(t){var r=++d;t?(i(t,!0).then(function(i){if(r===d){var a=u.$new(),l=i,h=n(l)(a,function(t){p(),e.enter(t,o)});s=a,c=h,s.$emit("$includeContentLoaded",t)}},function(){r===d&&(p(),a.$emit("$includeContentError",t))}),a.$emit("$includeContentRequested",t)):p()}),a.$on("$destroy",p)}}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(e,t,n){e.placement&&t.addClass(e.placement),e.popupClass&&t.addClass(e.popupClass),e.animation()&&t.addClass(n.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function(e){return e("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function(e){return e("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(e,t,n){return t||n.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive("popoverTemplate",["$tooltip",function(e){return e("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var i=this,a=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(e.max)?e.max:n.max,this.addBar=function(t,n){a||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.init=function(a){i=a,i.$render=this.render,i.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var o=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(o)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var a=i[0],o=i[1];a.init(o)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length&&e.active!==!1?e.active=!0:e.active?t.select(e):e.active=!1},t.removeTab=function(e){var a=n.indexOf(e);if(e.active&&n.length>1&&!i){var o=a==n.length-1?a-1:a+1;t.select(n[o])}n.splice(a,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse","$log",function(e,t){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(n,i,a){return function(n,i,o,r){n.$watch("active",function(e){e&&r.select(n)}),n.disabled=!1,o.disable&&n.$parent.$watch(e(o.disable),function(e){n.disabled=!!e}),o.disabled&&(t.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),n.$parent.$watch(e(o.disabled),function(e){n.disabled=!!e})),n.select=function(){n.disabled||(n.active=!0)},r.addTab(n),n.$on("$destroy",function(){r.removeTab(n)}),n.$transcludeFn=a}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,i){var a=t.$eval(i.tabContentTransclude);a.$transcludeFn(a.$parent,function(t){angular.forEach(t,function(t){e(t)?a.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,i,a,o){function r(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===f[1]&&(t+=12)),t):void 0}function s(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e.toString()}function c(e){u(),m.$setViewValue(new Date(h)),d(e)}function u(){m.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function d(t){var n=h.getHours(),i=h.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:l(n),"m"!==t&&(e.minutes=l(i)),e.meridian=h.getHours()<12?f[0]:f[1]}function p(e){var t=new Date(h.getTime()+6e4*e);h.setHours(t.getHours(),t.getMinutes()),c()}var h=new Date,m={$setViewValue:angular.noop},f=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):o.meridians||a.DATETIME_FORMATS.AMPMS;this.init=function(n,i){m=n,m.$render=this.render,m.$formatters.unshift(function(e){return e?new Date(e):null});var a=i.eq(0),r=i.eq(1),s=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):o.mousewheel;s&&this.setupMousewheelEvents(a,r);var l=angular.isDefined(t.arrowkeys)?e.$parent.$eval(t.arrowkeys):o.arrowkeys;l&&this.setupArrowkeyEvents(a,r),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):o.readonlyInput,this.setupInputEvents(a,r)};var g=o.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){g=parseInt(e,10)});var v=o.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=o.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,m.$error.time){var n=r(),i=s();angular.isDefined(n)&&angular.isDefined(i)&&(h.setHours(n),c())}else d()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,n){t.bind("keydown",function(t){38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply())}),n.bind("keydown",function(t){38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply())})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){m.$setViewValue(null),m.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=r();angular.isDefined(e)?(h.setHours(e),c("h")):i(!0)},t.bind("blur",function(){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=s();angular.isDefined(e)?(h.setMinutes(e),c("m")):i(void 0,!0)},n.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=m.$viewValue;isNaN(e)?(m.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(h=e),u(),d())},e.incrementHours=function(){p(60*g)},e.decrementHours=function(){p(60*-g)},e.incrementMinutes=function(){p(v)},e.decrementMinutes=function(){p(-v)},e.toggleMeridian=function(){p(720*(h.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,i){var a=i[0],o=i[1];o&&a.init(o,t.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(e,t,n,i,a){function o(e){for(var t in e)if(void 0!==s.style[t])return e[t]}a||i.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var r=function(i,a,o){o=o||{};var s=e.defer(),l=r[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(){n.$apply(function(){i.unbind(l,c),s.resolve(i)})};return l&&i.bind(l,c),t(function(){angular.isString(a)?i.addClass(a):angular.isFunction(a)?a(i):angular.isObject(a)&&i.css(a),l||s.resolve(i)}),s.promise.cancel=function(){l&&i.unbind(l,c),s.reject("Transition cancelled")},s.promise},s=document.createElement("trans"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},c={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=o(l),r.animationEndEventName=o(c),r}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,i,a,o,r){var s=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,u,d){var p,h=l.$eval(u.typeaheadMinLength)||1,m=l.$eval(u.typeaheadWaitMs)||0,f=l.$eval(u.typeaheadEditable)!==!1,g=t(u.typeaheadLoading).assign||angular.noop,v=t(u.typeaheadOnSelect),b=u.typeaheadInputFormatter?t(u.typeaheadInputFormatter):void 0,w=u.typeaheadAppendToBody?l.$eval(u.typeaheadAppendToBody):!1,y=l.$eval(u.typeaheadFocusFirst)!==!1,k=t(u.ngModel).assign,$=r.parse(u.typeahead),C=l.$new();l.$on("$destroy",function(){C.$destroy()});var x="typeahead-"+C.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":x});var D=angular.element("<div typeahead-popup></div>");D.attr({id:x,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(u.typeaheadTemplateUrl)&&D.attr("template-url",u.typeaheadTemplateUrl);var E=function(){C.matches=[],C.activeIdx=-1,c.attr("aria-expanded",!1)},T=function(e){return x+"-option-"+e};C.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",T(e))});var A=function(e){var t={$viewValue:e};g(l,!0),n.when($.source(l,t)).then(function(n){var i=e===d.$viewValue;if(i&&p)if(n&&n.length>0){C.activeIdx=y?0:-1,C.matches.length=0;for(var a=0;a<n.length;a++)t[$.itemName]=n[a],C.matches.push({id:T(a),label:$.viewMapper(C,t),model:n[a]});C.query=e,C.position=w?o.offset(c):o.position(c),C.position.top=C.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else E();i&&g(l,!1)},function(){E(),g(l,!1)})};E(),C.query=void 0;var S,M=function(e){S=i(function(){A(e)},m)},P=function(){S&&i.cancel(S)};d.$parsers.unshift(function(e){return p=!0,e&&e.length>=h?m>0?(P(),M(e)):A(e):(g(l,!1),P(),E()),f?e:e?void d.$setValidity("editable",!1):(d.$setValidity("editable",!0),e)}),d.$formatters.push(function(e){var t,n,i={};return f||d.$setValidity("editable",!0),b?(i.$model=e,b(l,i)):(i[$.itemName]=e,t=$.viewMapper(l,i),i[$.itemName]=void 0,n=$.viewMapper(l,i),t!==n?t:e)}),C.select=function(e){var t,n,a={};a[$.itemName]=n=C.matches[e].model,t=$.modelMapper(l,a),k(l,t),d.$setValidity("editable",!0),d.$setValidity("parse",!0),v(l,{$item:n,$model:t,$label:$.viewMapper(l,a)}),E(),i(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==C.matches.length&&-1!==s.indexOf(e.which)&&(-1!=C.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(C.activeIdx=(C.activeIdx+1)%C.matches.length,C.$digest()):38===e.which?(C.activeIdx=(C.activeIdx>0?C.activeIdx:C.matches.length)-1,C.$digest()):13===e.which||9===e.which?C.$apply(function(){C.select(C.activeIdx)}):27===e.which&&(e.stopPropagation(),E(),C.$digest()))}),c.bind("blur",function(){p=!1});var O=function(e){c[0]!==e.target&&(E(),C.$digest())};a.bind("click",O),l.$on("$destroy",function(){a.unbind("click",O),w&&N.remove(),D.remove()});var N=e(D)(C);w?a.find("body").append(N):c.after(N)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,a,o){var r=n(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e(r).then(function(e){t(e.trim())(i,function(e){a.replaceWith(e)})})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href="javascript:void(0)" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:\'index\' track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}" ng-class="dt.customClass">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')
}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n	ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1, $event)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages, $event)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-window.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover-window.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen, fade: animation }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" tooltip-template-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n,i,r,s){function l(){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}function c(t){if(!m){m=!0;try{for(var l=t.__files_||t.target&&t.target.files,c=[],u=[],d=0;d<l.length;d++){var p=l.item(d);o(e,r,n,p,t)?c.push(p):u.push(p)}a(r,s,e,i,n,n.ngfChange||n.ngfSelect,c,u,t),0==c.length&&(t.target.value=c)}finally{m=!1}}}function u(i){n.ngfMultiple&&i.attr("multiple",r(n.ngfMultiple)(e)),r(n.ngfMultiple)(e)||i.attr("multiple",void 0),n.accept&&i.attr("accept",n.accept),n.ngfCapture&&i.attr("capture",r(n.ngfCapture)(e)),n.ngfDisabled&&i.attr("disabled",r(n.ngfDisabled)(e));for(var a=0;a<t[0].attributes.length;a++){var o=t[0].attributes[a];"type"!==o.name&&"class"!==o.name&&"id"!==o.name&&"style"!==o.name&&i.attr(o.name,o.value)}}function d(){if(!t.attr("disabled")){var e=angular.element('<input type="file">');return u(e),l()?(t.replaceWith(e),t=e):(e.css("display","none").attr("tabindex","-1").attr("__ngf_gen__",!0),t.__ngf_ref_elem__&&t.__ngf_ref_elem__.remove(),t.__ngf_ref_elem__=e,document.body.appendChild(e[0])),e}}function p(t){a(r,s,e,i,n,n.ngfChange||n.ngfSelect,[],[],t,!0)}function h(e){function n(){i[0].click(),l()&&(t.bind("click touchend",h),e.preventDefault())}e.preventDefault();var i=d(e);i&&(i.bind("change",c),p(e),navigator.userAgent.toLowerCase().match(/android/)?setTimeout(function(){n()},0):n())}var m=!1;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(t,d,u,c,p):t.bind("click touchend",h)}function n(e,t,n,r,s,l,c){function u(e,t,n){var i=!0,a=n.dataTransfer.items;if(null!=a)for(var r=0;r<a.length&&i;r++)i=i&&("file"==a[r].kind||""==a[r].kind)&&o(e,s,t,a[r],n);var l=s(t.ngfDragOverClass)(e,{$event:n});return l&&(l.delay&&(g=l.delay),l.accept&&(l=i?l.accept:l.reject)),l||t.ngfDragOverClass||"dragover"}function d(t,i,a,r){function u(i){o(e,s,n,i,t)?p.push(i):h.push(i)}function d(e,t,n){if(null!=t)if(t.isDirectory){var i=(n||"")+t.name;u({name:t.name,type:"directory",path:i});var a=t.createReader(),o=[];f++;var r=function(){a.readEntries(function(i){try{if(i.length)o=o.concat(Array.prototype.slice.call(i||[],0)),r();else{for(var a=0;a<o.length;a++)d(e,o[a],(n?n:"")+t.name+"/");f--}}catch(s){f--,console.error(s)}},function(){f--})};r()}else f++,t.file(function(e){try{f--,e.path=(n?n:"")+e.name,u(e)}catch(t){f--,console.error(t)}},function(){f--})}var p=[],h=[],m=t.dataTransfer.items,f=0;if(m&&m.length>0&&"file"!=c.protocol())for(var g=0;g<m.length;g++){if(m[g].webkitGetAsEntry&&m[g].webkitGetAsEntry()&&m[g].webkitGetAsEntry().isDirectory){var v=m[g].webkitGetAsEntry();if(v.isDirectory&&!a)continue;null!=v&&d(p,v)}else{var b=m[g].getAsFile();null!=b&&u(b)}if(!r&&p.length>0)break}else{var w=t.dataTransfer.files;if(null!=w)for(var g=0;g<w.length&&(u(w.item(g)),r||!(p.length>0));g++);}var y=0;!function k(e){l(function(){if(f)10*y++<2e4&&k(10);else{if(!r&&p.length>1){for(g=0;"directory"==p[g].type;)g++;p=[p[g]]}i(p,h)}},e||0)}()}var p=i();if(n.dropAvailable&&l(function(){e[n.dropAvailable]?e[n.dropAvailable].value=p:e[n.dropAvailable]=p}),!p)return void(1==s(n.ngfHideOnDropNotAvailable)(e)&&t.css("display","none"));var h,m=null,f=s(n.ngfStopPropagation),g=1,v=(s(n.ngfAccept),s(n.ngfDisabled));t[0].addEventListener("dragover",function(i){if(!v(e)){if(i.preventDefault(),f(e)&&i.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var a=i.dataTransfer.effectAllowed;i.dataTransfer.dropEffect="move"===a||"linkMove"===a?"move":"copy"}l.cancel(m),e.actualDragOverClass||(h=u(e,n,i)),t.addClass(h)}},!1),t[0].addEventListener("dragenter",function(t){v(e)||(t.preventDefault(),f(e)&&t.stopPropagation())},!1),t[0].addEventListener("dragleave",function(){v(e)||(m=l(function(){t.removeClass(h),h=null},g||1))},!1),t[0].addEventListener("drop",function(i){v(e)||(i.preventDefault(),f(e)&&i.stopPropagation(),t.removeClass(h),h=null,d(i,function(t,o){a(s,l,e,r,n,n.ngfChange||n.ngfDrop,t,o,i)},0!=s(n.ngfAllowDir)(e),n.multiple||s(n.ngfMultiple)(e)))},!1)}function i(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}function a(e,t,n,i,a,o,r,s,l,c){function u(){i&&(e(a.ngModel).assign(n,r),t(function(){i&&i.$setViewValue(null!=r&&0==r.length?null:r)})),a.ngModelRejected&&e(a.ngModelRejected).assign(n,s),o&&e(o)(n,{$files:r,$rejectedFiles:s,$event:l})}c?u():t(function(){u()})}function o(e,t,n,i,a){var o=t(n.ngfAccept)(e,{$file:i,$event:a}),s=t(n.ngfMaxSize)(e,{$file:i,$event:a})||9007199254740991,l=t(n.ngfMinSize)(e,{$file:i,$event:a})||-1;if(null!=o&&angular.isString(o)){var c=new RegExp(r(o),"gi");o=null!=i.type&&c.test(i.type.toLowerCase())||null!=i.name&&c.test(i.name.toLowerCase())}return(null==o||o)&&(null==i.size||i.size<s&&i.size>l)}function r(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var t=e.split(","),n="";if(t.length>1)for(var i=0;i<t.length;i++)n+="("+r(t[i])+")",i<t.length-1&&(n+="|");else 0==e.indexOf(".")&&(e="*"+e),n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,".");return n}var s;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&e("setRequestHeader",function(e){return function(t,n){if("__setXHR_"===t){var i=n(this);i instanceof Function&&i(this)}else e.apply(this,arguments)}});var l=angular.module("ngFileUpload",[]);l.version="4.1.3",l.service("Upload",["$http","$q","$timeout",function(e,t,n){function i(i){i.method=i.method||"POST",i.headers=i.headers||{},i.transformRequest=i.transformRequest||function(t,n){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:e.defaults.transformRequest[0](t,n)};var a=t.defer(),o=a.promise;return i.headers.__setXHR_=function(){return function(e){e&&(i.__XHR=e,i.xhrFn&&i.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=i,a.notify?a.notify(e):o.progress_fn&&n(function(){o.progress_fn(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=i,a.notify?a.notify(e):o.progress_fn&&n(function(){o.progress_fn(e)}))},!1))}},e(i).then(function(e){a.resolve(e)},function(e){a.reject(e)},function(e){a.notify(e)}),o.success=function(e){return o.then(function(t){e(t.data,t.status,t.headers,i)}),o},o.error=function(e){return o.then(null,function(t){e(t.data,t.status,t.headers,i)}),o},o.progress=function(e){return o.progress_fn=e,o.then(null,null,function(t){e(t)}),o},o.abort=function(){return i.__XHR&&n(function(){i.__XHR.abort()}),o},o.xhr=function(e){return i.xhrFn=function(t){return function(){t&&t.apply(o,arguments),e.apply(o,arguments)}}(i.xhrFn),o},o}this.upload=function(e){return e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n=new FormData,i={};for(s in e.fields)e.fields.hasOwnProperty(s)&&(i[s]=e.fields[s]);if(t&&(i.data=t),e.formDataAppender)for(s in i)i.hasOwnProperty(s)&&e.formDataAppender(n,s,i[s]);else for(s in i)if(i.hasOwnProperty(s)){var a=i[s];void 0!==a&&(angular.isDate(a)&&(a=a.toISOString()),angular.isString(a)?n.append(s,a):e.sendObjectsAsJsonBlob&&angular.isObject(a)?n.append(s,new Blob([a],{type:"application/json"})):n.append(s,JSON.stringify(a)))}if(null!=e.file){var o=e.fileFormDataName||"file";if(angular.isArray(e.file))for(var r=angular.isString(o),l=0;l<e.file.length;l++)n.append(r?o:o[l],e.file[l],e.fileName&&e.fileName[l]||e.file[l].name);else n.append(o,e.file,e.fileName||e.file.name)}return n}),i(e)},this.http=function(e){return i(e)}}]),l.directive("ngfSelect",["$parse","$timeout","$compile",function(e,n,i){return{restrict:"AEC",require:"?ngModel",link:function(a,o,r,s){t(a,o,r,s,e,n,i)}}}]),l.directive("ngfDrop",["$parse","$timeout","$location",function(e,t,i){return{restrict:"AEC",require:"?ngModel",link:function(a,o,r,s){n(a,o,r,s,e,t,i)}}}]),l.directive("ngfNoFileDrop",function(){return function(e,t){i()&&t.css("display","none")}}),l.directive("ngfDropAvailable",["$parse","$timeout",function(e,t){return function(n,a,o){if(i()){var r=e(o.ngfDropAvailable);t(function(){r(n),r.assign&&r.assign(n,!0)})}}}]),l.directive("ngfSrc",["$parse","$timeout",function(e,t){return{restrict:"AE",link:function(e,n,i){window.FileReader&&e.$watch(i.ngfSrc,function(e){e?t(function(){var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t(function(){n.attr("src",e.target.result)})}}):n.attr("src","")})}}}])}(),function(e,t,n,i){"use strict";var a=t.module("ngDragDrop",[]).service("ngDragDropService",["$timeout","$parse","$q",function(o,r,s){this.draggableScope=null,this.droppableScope=null,t.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";.angular-dragdrop-hide{display: none !important;}</style>'),this.callEventCallback=function(e,t,i,a){function o(t){var i=-1!==t.indexOf("(")?t.indexOf("("):t.length,a=-1!==t.lastIndexOf(")")?t.lastIndexOf(")"):t.length,o=t.substring(i+1,a),s=-1!==t.indexOf(".")?t.substr(0,t.indexOf(".")):null;return s=e[s]&&"function"==typeof e[s].constructor?s:null,{callback:t.substring(s&&s.length+1||0,i),args:n.map(o&&o.split(",")||[],function(t){return[r(t)(e)]}),constructor:s}}if(t){var s=o(t),l=s.callback,c=s.constructor,u=[i,a].concat(s.args);return(e[l]||e[c][l]).apply(e,u)}},this.invokeDrop=function(e,n,r,l){var c,u,d="",p="",h={},m={},f=null,g={},v={},b=null,w=this.droppableScope,y=this.draggableScope,k=null,$=[];d=e.ngattr("ng-model"),p=n.ngattr("ng-model"),c=y.$eval(d),u=w.$eval(p),b=n.find("[jqyoui-draggable]:last,[data-jqyoui-draggable]:last"),m=w.$eval(n.attr("jqyoui-droppable")||n.attr("data-jqyoui-droppable"))||[],h=y.$eval(e.attr("jqyoui-draggable")||e.attr("data-jqyoui-draggable"))||[],h.index=this.fixIndex(y,h,c),m.index=this.fixIndex(w,m,u),f=t.isArray(c)?h.index:null,g=t.isArray(c)?c[f]:c,h.deepCopy&&(g=t.copy(g)),v=t.isArray(u)&&m&&m.index!==i?u[m.index]:t.isArray(u)?{}:u,m.deepCopy&&(v=t.copy(v)),h.beforeDrop&&$.push(this.callEventCallback(y,h.beforeDrop,r,l)),s.all($).then(t.bind(this,function(){h.animate===!0?(k=e.clone(),k.css({position:"absolute"}).css(e.offset()),t.element(document).find("body").append(k),e.addClass("angular-dragdrop-hide"),this.move(k,b.length>0?b:n,null,"fast",m,function(){k.remove()}),this.move(b.length>0&&!m.multiple?b:[],e.parent("[jqyoui-droppable],[data-jqyoui-droppable]"),a.startXY,"fast",m,t.bind(this,function(){o(t.bind(this,function(){e.css({position:"relative",left:"",top:""}).removeClass("angular-dragdrop-hide"),b.css({position:"relative",left:"",top:"",display:"none"===b.css("display")?"":b.css("display")}),this.mutateDraggable(y,m,h,d,p,v,e),this.mutateDroppable(w,m,h,p,g,f),this.callEventCallback(w,m.onDrop,r,l)}))}))):o(t.bind(this,function(){this.mutateDraggable(y,m,h,d,p,v,e),this.mutateDroppable(w,m,h,p,g,f),this.callEventCallback(w,m.onDrop,r,l)}))}),function(){l.draggable.css({left:"",top:""})})},this.move=function(t,n,a,o,r,s){if(0===t.length)return s&&e.setTimeout(function(){s()},300),!1;var l=t.css("z-index"),c=t[r.containment||"offset"](),u=n.css("display"),d=n.hasClass("ng-hide");null===a&&n.length>0&&((n.attr("jqyoui-draggable")||n.attr("data-jqyoui-draggable"))!==i&&n.ngattr("ng-model")!==i&&n.is(":visible")&&r&&r.multiple?(a=n[r.containment||"offset"](),r.stack===!1?a.left+=n.outerWidth(!0):a.top+=n.outerHeight(!0)):(d&&n.removeClass("ng-hide"),a=n.css({visibility:"hidden",display:"block"})[r.containment||"offset"](),n.css({visibility:"",display:u}))),t.css({position:"absolute","z-index":9999}).css(c).animate(a,o,function(){d&&n.addClass("ng-hide"),t.css("z-index",l),s&&s()})},this.mutateDroppable=function(e,n,i,a,o,s){var l=e.$eval(a);e.dndDragItem=o,t.isArray(l)?(n&&n.index>=0?l[n.index]=o:l.push(o),i&&i.placeholder===!0&&(l[l.length-1].jqyoui_pos=s)):(r(a+" = dndDragItem")(e),i&&i.placeholder===!0&&(l.jqyoui_pos=s))},this.mutateDraggable=function(e,n,a,o,s,l,c){var u=t.equals(l,{})||!l,d=e.$eval(o);e.dndDropItem=l,a&&a.placeholder?"keep"!=a.placeholder&&(t.isArray(d)&&a.index!==i?d[a.index]=l:r(o+" = dndDropItem")(e)):t.isArray(d)?u?a&&a.placeholder!==!0&&"keep"!==a.placeholder&&d.splice(a.index,1):d[a.index]=l:(r(o+" = dndDropItem")(e),e.$parent&&r(o+" = dndDropItem")(e.$parent)),c.css({"z-index":"",left:"",top:""})},this.fixIndex=function(e,n,a){if(n.applyFilter&&t.isArray(a)&&a.length>0){var o=e[n.applyFilter](),r=o[n.index],s=i;return a.forEach(function(e,n){t.equals(e,r)&&(s=n)}),s}return n.index}}]).directive("jqyouiDraggable",["ngDragDropService",function(e){return{require:"?jqyouiDroppable",restrict:"A",link:function(n,i,o){var r,s,l,c,u=function(u){u?(r=n.$eval(i.attr("jqyoui-draggable")||i.attr("data-jqyoui-draggable"))||{},s=n.$eval(o.jqyouiOptions)||{},i.draggable({disabled:!1}).draggable(s).draggable({start:function(i,o){e.draggableScope=n,l=t.element(s.helper?o.helper:this).css("z-index"),t.element(s.helper?o.helper:this).css("z-index",9999),a.startXY=t.element(this)[r.containment||"offset"](),e.callEventCallback(n,r.onStart,i,o)},stop:function(i,a){t.element(s.helper?a.helper:this).css("z-index",l),e.callEventCallback(n,r.onStop,i,a)},drag:function(t,i){e.callEventCallback(n,r.onDrag,t,i)}})):i.draggable({disabled:!0}),c&&t.isDefined(u)&&(t.equals(o.drag,"true")||t.equals(o.drag,"false"))&&(c(),c=null)};c=n.$watch(function(){return n.$eval(o.drag)},u),u(),i.on("$destroy",function(){i.draggable({disabled:!0}).draggable("destroy")})}}}]).directive("jqyouiDroppable",["ngDragDropService","$q",function(e,n){return{restrict:"A",priority:1,link:function(i,a,o){var r,s,l=function(l){l?(r=i.$eval(t.element(a).attr("jqyoui-droppable")||t.element(a).attr("data-jqyoui-droppable"))||{},a.droppable({disabled:!1}).droppable(i.$eval(o.jqyouiOptions)||{}).droppable({over:function(t,n){e.callEventCallback(i,r.onOver,t,n)},out:function(t,n){e.callEventCallback(i,r.onOut,t,n)},drop:function(a,s){var l=null;l=r.beforeDrop?e.callEventCallback(i,r.beforeDrop,a,s):function(){var e=n.defer();return e.resolve(),e.promise}(),l.then(t.bind(this,function(){t.element(s.draggable).ngattr("ng-model")&&o.ngModel?(e.droppableScope=i,e.invokeDrop(t.element(s.draggable),t.element(this),a,s)):e.callEventCallback(i,r.onDrop,a,s)}),function(){s.draggable.css({left:"",top:""})})}})):a.droppable({disabled:!0}),s&&t.isDefined(l)&&(t.equals(o.drop,"true")||t.equals(o.drop,"false"))&&(s(),s=null)};s=i.$watch(function(){return i.$eval(o.drop)},l),l(),a.on("$destroy",function(){a.droppable({disabled:!0}).droppable("destroy")})}}}]);t.element.prototype.ngattr=function(e){var n=t.element(this).get(0);return n.getAttribute(e)||n.getAttribute("data-"+e)}}(window,window.angular,window.jQuery);var EDITOR=angular.module("editor",["angular-medium-editor","ui.bootstrap","ui.sortable","ngFileUpload","ngDragDrop"]);angular.module("templates").run(["$templateCache",function(e){e.put("templates/add.html",'<div class="btn-group">\n  <a  ng-repeat="widget in WidgetType.widgets"\n      class="btn btn-default"\n      ng-click="addWidget(widget)"\n      data-drag="true"\n      jqyoui-draggable="{index: {{$index}}, animate: true, placeholder: \'keep\'}"\n      data-jqyoui-options="{revert: \'invalid\', helper: \'clone\'}">\n    <span >\n      {{ widget.name }}\n    </span>\n  </a>\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/app.html",'<div ng-controller="AppController">\n  <div ui-sortable="sortableWidgetOptions" ng-model="widgets" ng-cloak>  \n    <div  ng-click="setCurrentWidget(widget); $event.stopPropagation()"\n          widget\n          ng-repeat="widget in widgets"\n          class="widget"\n          ng-mouseover="widget.controls = true"\n          ng-mouseleave="widget.controls = false">\n      <div ng-include="widget | widgetTemplateUrl" replace></div>\n      <div class="controls" ng-show="widget.controls" >\n        <div class="handle btn btn-xs btn-default"><i class="glyphicon glyphicon-sort"></i></div>\n        <div class="btn btn-xs btn-danger" ng-click="removeWidget(widget)"><i class="glyphicon glyphicon-remove"></i></div>\n      </div>\n    </div>\n  </div>\n\n  <div class="text-center add-widget">\n    <button popover-placement="bottom" popover-template="\'templates/add.html\'" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i></button>\n  </div>\n\n  <nav class="c-menu c-menu--slide-bottom" ng-class="{ \'is-active\': showWidgetsMenu}">\n    <button class="c-menu__close" ng-click="showWidgetsMenu = false"><strong>x</strong></button>\n    <ul class="c-menu__items">\n      <li class="c-menu__item">\n        <a  href="#"\n            ng-repeat="widget in WidgetType.widgets"\n            ng-click="addWidget(widget)"\n            data-drag="true"\n            jqyoui-draggable="{index: {{$index}}, animate: true, placeholder: \'keep\'}"\n            data-jqyoui-options="{revert: \'invalid\', helper: \'clone\'}"\n            class="c-menu__link">\n          {{ widget.name }}\n        </a>\n      </li>\n    </ul>\n  </nav><!-- /c-menu slide-bottom -->\n\n  <nav class="c-menu c-menu--slide-right" ng-class="{ \'is-active\': $root.currentWidget}" ng-click="$event.stopPropagation()">\n    <h3>{{ $root.currentWidget.name }} Config</h3>\n    <div ng-include="(widget = $root.currentWidget) | widgetConfigTemplateUrl"></div>\n  </nav><!-- /c-menu slide-right -->\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/blank_column/widget1.html",'<div class="add-column">\n  <p>drag &amp; drop widgets</p>\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/grid/config1.html","grid config")}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/grid/widget1.html",'<div class="row" ng-mouseenter="widget.config.showAdd = true" ng-mouseleave="widget.config.showAdd = false">\n\n  <div  resizable \n        ng-class="\'col-md-\' + widget.size"\n        ng-include="widget | widgetTemplateUrl"\n        ng-repeat="widget in widget.config.columns"\n        ng-click="setCurrentWidgetFromDirective(widget)"\n        data-drop="true"\n        jqyoui-droppable="{onDrop: \'dropCallback\'}"\n        ng-model="widget">\n  </div>\n\n  <div class="col-md-2 pdng" ng-if="widget.config.showAdd" ng-click="widget.config.columns.push({ name: \'Blank Column\', machineName: \'bootstrap/blank_column\', version: 1, size: 3 })">\n    <div class="add-column">\n      <p><i class="glypicon glyphicon-plus" style="font-size: 48px"></i></p>\n    </div>\n  </div>\n\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/image/config1.html",'<div class="form-group">\n  <label>Select Image</label>\n  <button class="btn btn-default form-control" ngf-select ng-model="widget.value.url">Select Image</button>\n</div>\n\n<div class="checkbox">\n  <label>\n    <input type="checkbox" ng-model="widget.config.caption"> Caption\n  </label>\n</div>\n\n\n<div class="form-group">\n  <div class="btn-group">\n    <label  class="btn btn-default"\n            ng-model="widget.config.type"\n            btn-radio="type"\n            uncheckable\n            ng-repeat="type in [\'thumbnail\', \'circle\', \'rounded\']">\n      {{ type }}\n    </label>\n  </div>\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/image/widget1.html",'<figure>\n  <img  placeholder-image="images/example_image.png"\n        img-src="widget.value.url[0]"\n        ngf-src="widget.value.url[0]"\n        class="img-responsive"\n        ng-class="\'img-\' + widget.config.type">\n  <figcaption ng-if="widget.config.caption" medium-editor ng-model="widget.value.caption"></figcaption>\n</figure>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/paragraph/config1.html",'<div class="checkbox">\n  <label>\n    <input type="checkbox" ng-model="widget.config.lead"> Lead\n  </label>\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/paragraph/widget1.html",'<div ng-model="widget.value" \n  ng-class="{ lead: widget.config.lead }"\n  medium-editor \n  bind-options=\'paragraphOptions\'>\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/table/config1.html",'<div class="form-group">\n  <label>Column Count</label>\n  <input class="form-control" type="number" ng-model="widget.config.columnCount">\n</div>\n\n<div class="form-group">\n  <label>Row Count</label>\n  <input class="form-control" type="number" ng-model="widget.config.rowCount">\n</div>\n\n<div class="checkbox">\n  <label>\n    <input type="checkbox" ng-model="widget.config.striped">\n    Striped\n  </label>\n</div>\n\n<div class="checkbox">\n  <label>\n    <input type="checkbox" ng-model="widget.config.bordered">\n    Bordered\n  </label>\n</div>\n\n<div class="checkbox">\n  <label>\n    <input type="checkbox" ng-model="widget.config.hover">\n    Hover\n  </label>\n</div>\n\n<div class="checkbox">\n  <label>\n    <input type="checkbox" ng-model="widget.config.condensed">\n    Condenced\n  </label>\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/bootstrap/table/widget1.html",'<div class="table-responsive">\n  <table class="table"\n    ng-class=\'{\n      "table-striped": widget.config.striped,\n      "table-bordered": widget.config.bordered,\n      "table-hover": widget.config.hover,\n      "table-condensed": widget.config.condensed }\'>\n    <tbody>\n      <tr ng-repeat="_ in getNumber(widget.config.rowCount) track by $index">\n        <td ng-init="widget.value[$parent.$index] = widget.value[$parent.$index] || []"\n            ng-model="widget.value[$parent.$index][$index]"\n            ng-repeat="_ in getNumber(widget.config.columnCount) track by $index"\n            medium-editor bind-options=\'oneLineMedium\'>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>')}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/hr/config1.html","config.html")}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/hr/widget1.html","<hr />")}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/hs/header/config1.html",'<div class="radio" ng-repeat="tag in [\'h1\', \'h2\', \'h3\', \'h4\', \'h5\']">\n  <label>\n    <input type="radio" ng-model="widget.config.tag" ng-value="tag">\n    {{ tag }}\n  </label>\n</div>\n\n<div class="checkbox">\n  <label>\n    <input type="checkbox" ng-model="widget.config.bordered"> Bordered\n  </label>\n</div>')
}]),angular.module("templates").run(["$templateCache",function(e){e.put("templates/widgets/hs/header/widget1.html",'<div header-tag tag="widget.config.tag" widget="widget" model="widget.value"></div>')}]),EDITOR.controller("AppController",function(e,t,n,i){t.WidgetType=i,t.getNumber=function(e){return new Array(e)},n.on("click",function(){e.$apply(function(){e.currentWidget=null}),console.log("Clicked Document!")}),t.sortableWidgetOptions={handle:".handle",placeholder:"highlight",axis:"y",start:function(e,t){console.log("sorting started"),angular.element(".highlight").height(t.item.height())}},t.addColumn=function(e,n){e.config.columns.push(n),t.newCol={}},t.setCurrentWidget=function(t){console.log("SETTING WIDGET from app_controller"),"Grid"!=t.name&&(e.currentWidget=t)},t.removeWidget=function(e){index=t.widgets.indexOf(e),index>-1&&(t.widgets.splice(index,1),console.log("WIDGET REMOVED!"))},t.previewImage=function(){console.log("previewed image")},t.addWidget=function(e){var n=Date.now(),i=angular.copy(e);i.timestamp=n,t.widgets.push(i),console.log(e)},t.dropCallback=function(e,t){sourceWidget=angular.element(t.draggable).scope().widget,targetScope=angular.element(e.target).scope(),targetCol=targetScope.widget,grid=targetScope.$parent.$parent.widget,index=grid.config.columns.indexOf(targetCol),size=targetCol.size,newCol=angular.copy(sourceWidget),newCol.size=size,grid.config.columns[index]=newCol},t.setCurrentWidgetFromDirective=function(t){console.log("setting current widget from widget view."),console.log(t),e.currentWidget=t},t.oneLineMedium={placeholder:!1,paste:{forcePlainText:!0},disableReturn:!0}}),EDITOR.factory("WidgetType",function(){var e={widgets:[{name:"Header",machineName:"hs/header",version:1,value:"Lorem Ipsum Nedir?",config:{tag:"h3"}},{name:"Paragraph",machineName:"bootstrap/paragraph",version:1,value:"<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.  Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>"},{name:"Horizontal Rule",machineName:"hr",version:1},{name:"Image",machineName:"bootstrap/image",version:1,value:[""],config:{type:"thumbnail"}},{name:"Table",machineName:"bootstrap/table",version:1,value:[["first","last","age"],["cihad","paksoy","28"],["huseyin","gurluk","25"]],config:{rowCount:3,columnCount:3}},{name:"Grid",machineName:"bootstrap/grid",version:1,config:{columns:[{name:"Blank Column",machineName:"bootstrap/blank_column",version:1,size:6}]}}]};return e}),EDITOR.directive("headerTag",function(e){return{restrict:"EA",replace:!0,scope:{tag:"=",widget:"=",model:"@"},link:function(t,n){var i=(t.tag,t.model),a=null,o=function(e,t){return"<"+e+' medium-editor ng-model="'+t+'" ng-class="{ \'bordered-bottom\' : widget.config.bordered }" options=\'{"forcePlainText": true,"disableReturn": true,"buttons": ["bold", "italic", "underline", "anchor"],"spellcheck": false}\'></'+e+">"};t.$watch("tag",function(r){a&&(a.remove(),a=null);var s=e(o(r,i))(t);n.append(s),a=s})}}}),EDITOR.directive("imgSrc",["$parse","$timeout",function(e,t){return{restrict:"AE",link:function(e,n,i){window.FileReader&&e.$watch(i.imgSrc,function(e){e?t(function(){var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t(function(){n.attr("src",e.target.result)})}}):n.attr("src",i.placeholderImage)})}}}]),EDITOR.directive("resizable",function(){return{require:"?ngModel",restrict:"A",scope:{ngModel:"="},link:function(e,t){function n(t){for(rowWidth=t.parent().width(),eWidth=t.width(),t.css("width",""),t.css("height",""),t.attr("class",t.attr("class").replace(/\bcol-.*?\b/g,"")),i=11;i>=0;i--)if(colWidth=rowWidth*i/12,eWidth>colWidth)return t.addClass("col-md-"+(i+1)),void(e.ngModel.size=i+1)}t.resizable({helper:"ui-resizable-helper",handles:"e"}),t.on("resizestart",function(){t.removeClass("easing")}),t.on("resizestop",function(){n&&n(t),t.addClass("easing")})}}}),EDITOR.directive("widget",function(){return{link:function(){}}}),EDITOR.directive("widgets",function(){return{require:"ngModel",scope:{widgets:"=ngModel"},templateUrl:"templates/app.html"}}),EDITOR.filter("widgetConfigTemplateUrl",function(){return function(e){return templateUrl=e?["templates/widgets/",e.machineName,"/config",e.version,".html"].join(""):"",templateUrl}}),EDITOR.filter("widgetTemplateUrl",function(){return function(e){return templateUrl=["templates/widgets/",e.machineName,"/widget",e.version,".html"].join(""),templateUrl}});