<div ng-controller="AppController">
  <div ui-sortable="sortableWidgetOptions" ng-model="widgets" ng-cloak>  
    <div  ng-click="setCurrentWidget(widget); $event.stopPropagation()"
          ng-repeat="widget in widgets"
          class="widget"
          ng-mouseover="widget.controls = true"
          ng-mouseleave="widget.controls = false">
      <div ng-include="widget | widgetTemplateUrl" replace></div>
      <div class="controls" ng-show="widget.controls" >
        <div class="handle btn btn-xs btn-default"><i class="glyphicon glyphicon-sort"></i></div>
        <div class="btn btn-xs btn-danger" ng-click="removeWidget(widget)"><i class="glyphicon glyphicon-remove"></i></div>
      </div>
    </div>
  </div>

  <div class="text-center add-widget">
    <button popover-placement="bottom" popover-template="'templates/add.html'" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i></button>
  </div>
  
  <nav class="c-menu c-menu--slide-right" ng-class="{ 'is-active': $root.currentWidget}" ng-click="$event.stopPropagation()" resizable-config>
    <h3>{{ $root.currentWidget.name }} Config</h3>
    <div ng-include="(widget = $root.currentWidget) | widgetConfigTemplateUrl"></div>
  </nav><!-- /c-menu slide-right -->
</div>
